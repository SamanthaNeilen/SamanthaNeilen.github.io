<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Samantha Neilen</title>
    <meta name="description" content="My name is Samantha Neilen, a dutch .NET developer. I have been coding professionaly since 2008. On this blog I will be writing about multiple subjects that ...">
    <link rel="stylesheet" href="/assets/css/syntax.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />
    <link rel="stylesheet" href="/assets/css/site.css" />
    <link rel="canonical" href="https://samanthaneilen.github.io/">
    <link rel="alternate" type="application/rss+xml" title="Samantha Neilen" href="/feed.xml">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
    <header aria-label="header" class="header">
        <span class="header-text">Samantha Neilen</span>
    </header>
</div>
        <div class="row">
            <div class="col-md-7 col-md-offset-1">
                <main class="page-content" aria-label="content">
                    <div>
    
    
    
    <article>
        <header class="article-header">
            <a href="/2019/12/30/Creating-more-maintainable-javascript-with-self-executing-functions.html">Creating more maintainable javascript with self-executing functions</a>
        </header>
        
        <span>Dec 30, 2019</span> <br />
        Tags: 
        JavaScript
        
        <div class="article-content">
            <p>I still mostly use regular JavaScript with jQuery in my applications. Before I started writing self-executing modules, my JavaScript was embedded all over the place in HTML and it was untestable (except for running a page in the browser).</p>

<p>A year or so ago a colleague introduced me to the concept of self-executing JavaScript functions. (Thank you Gijs Stoeldraaijers!) After adopting this practice, I found that I could write JavaScript modules with keeping the SOLID principles in mind. The most important benefits are creating smaller modules with a single purpose that can be tested and dependency injection support to make unit testing even easier. Even without adopting unit testing right away the improvements to maintainability were immense for me.</p>

<p>I’ll not go into JavaScript unit testing in this post and do an in-depth post as my next blog post. If you want to look into it, without waiting for that, please look at the <a href="https://docs.microsoft.com/en-us/visualstudio/javascript/unit-testing-javascript-with-visual-studio?view=vs-2019#unit-tests-in-other-project-types">Microsoft Docs page on Unit testing JavaScript and TypeScript in Visual Studio</a>.</p>

<p><strong>Table of contents:</strong></p>
<ul id="markdown-toc">
  <li><a href="#example-of-the-old-way-of-working-embedding-javascript-in-the-page" id="markdown-toc-example-of-the-old-way-of-working-embedding-javascript-in-the-page">Example of the old way of working (embedding JavaScript in the page)</a></li>
  <li><a href="#self-executing-functions" id="markdown-toc-self-executing-functions">Self-executing functions</a></li>
  <li><a href="#separating-html-control-events-and-javascript-hook-ups" id="markdown-toc-separating-html-control-events-and-javascript-hook-ups">Separating HTML control events and JavaScript hook-ups</a></li>
  <li><a href="#separating-html-templating-from-your-javascript-code" id="markdown-toc-separating-html-templating-from-your-javascript-code">Separating HTML templating from your JavaScript code</a></li>
</ul>

<h3 id="example-of-the-old-way-of-working-embedding-javascript-in-the-page">Example of the old way of working (embedding JavaScript in the page)</h3>
<p>Below, I have created an example of my old way of writing JavaScript on an overview page that loads data from an API endpoint and has some filter capabilities.</p>

<p>The data templates are hardcoded strings in the JavaScript and the search button event hookup is done through HTML markup.</p>

<p>A working Visual Studio project with the code listed below can be found in my <a href="https://github.com/SamanthaNeilen/JavascriptModulesExamples/tree/V1.0-Embedded-JavaScript">JavaScriptModuleExamples repository on GitHub with the tag “V1.0-Embedded-JavaScript”</a>.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Customer overview<span class="nt">&lt;/h1&gt;</span>

    @* Searchform *@
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"search-customer"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"searchCustomerName"</span> <span class="na">class=</span><span class="s">"col-sm-2 col-form-label"</span><span class="nt">&gt;</span>@Texts.Name<span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-5"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"searchCustomerName"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"searchEmail"</span> <span class="na">class=</span><span class="s">"col-sm-2 col-form-label"</span><span class="nt">&gt;</span>@Texts.Email<span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-5"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"searchEmail"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"searchCountry"</span> <span class="na">class=</span><span class="s">"col-sm-2 col-form-label"</span><span class="nt">&gt;</span>@Texts.Country<span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-5"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"searchCountry"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-sm btn-primary col-sm-2"</span> <span class="na">onclick=</span><span class="s">"filterData()"</span><span class="nt">&gt;</span>@Texts.Search<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    @* Grid for data *@
    <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"table mt-2"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;thead&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;th</span> <span class="na">scope=</span><span class="s">"col"</span><span class="nt">&gt;</span>@Texts.Name<span class="nt">&lt;/th&gt;</span>
                <span class="nt">&lt;th</span> <span class="na">scope=</span><span class="s">"col"</span><span class="nt">&gt;</span>@Texts.Email<span class="nt">&lt;/th&gt;</span>
                <span class="nt">&lt;th</span> <span class="na">scope=</span><span class="s">"col"</span><span class="nt">&gt;</span>@Texts.Country<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;/thead&gt;</span>
        <span class="nt">&lt;tbody</span> <span class="na">id=</span><span class="s">"customer-table-body"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">"loading-row"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">colspan=</span><span class="s">"3"</span><span class="nt">&gt;&lt;progress&gt;&lt;/progress&gt;&lt;/td&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;/tbody&gt;</span>
    <span class="nt">&lt;/table&gt;</span>
<span class="nt">&lt;/div&gt;</span>

@section Scripts {
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
        <span class="kd">const</span> <span class="nx">CUSTOMER_ROW_SELECTOR</span> <span class="o">=</span> <span class="s1">'.customer-row'</span><span class="p">,</span>
            <span class="nx">LOADING_ROW_SELECTOR</span> <span class="o">=</span> <span class="s1">'.loading-row'</span><span class="p">,</span>
            <span class="nx">DISPLAY_NONE_CLASS</span> <span class="o">=</span> <span class="s1">'display-none'</span><span class="p">,</span>
            <span class="nx">CUSTOMER_TABLE_BODY</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#customer-table-body'</span><span class="p">);</span>

        <span class="kd">function</span> <span class="nx">loadData</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">showLoader</span><span class="p">();</span>

            <span class="nx">$</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s1">'https://localhost:44313/api/customer'</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">customerList</span><span class="p">,</span> <span class="nx">textStatus</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">CUSTOMER_TABLE_BODY</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">getDataRows</span><span class="p">(</span><span class="nx">customerList</span><span class="p">));</span>
                    <span class="nx">showCustomerRows</span><span class="p">(</span><span class="nx">CUSTOMER_TABLE_BODY</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">CUSTOMER_ROW_SELECTOR</span><span class="p">));</span>
                <span class="p">})</span>
                <span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">textStatus</span><span class="p">,</span> <span class="nx">errorThrown</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">alert</span><span class="p">(</span><span class="s1">'error '</span> <span class="o">+</span> <span class="nx">textStatus</span> <span class="o">+</span> <span class="s1">' '</span> <span class="o">+</span> <span class="nx">errorThrown</span><span class="p">);</span>
                <span class="p">});</span>
        <span class="p">}</span>

        <span class="kd">function</span> <span class="nx">getDataRows</span><span class="p">(</span><span class="nx">customerList</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">rowTemplate</span> <span class="o">=</span> <span class="s1">'&lt;tr class="customer-row"&gt;&lt;td&gt;{name}&lt;/td&gt;&lt;td&gt;{email}&lt;/td&gt;&lt;td&gt;{country}&lt;/td&gt;&lt;/tr&gt;'</span><span class="p">;</span>
            <span class="kd">let</span> <span class="nx">dataRows</span> <span class="o">=</span> <span class="s1">'&lt;tr class="loading-row"&gt;&lt;td colspan="3"&gt;&lt;progress&gt;&lt;/progress&gt;&lt;/td&gt;&lt;/tr&gt;'</span><span class="p">;</span>

            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">customerList</span><span class="p">,</span>
                <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">customer</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">dataRows</span> <span class="o">+=</span> <span class="nx">rowTemplate</span>
                        <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'{name}'</span><span class="p">,</span> <span class="nx">customer</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'{email}'</span><span class="p">,</span> <span class="nx">customer</span><span class="p">.</span><span class="nx">email</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'{country}'</span><span class="p">,</span> <span class="nx">customer</span><span class="p">.</span><span class="nx">country</span><span class="p">);</span>
                <span class="p">});</span>

            <span class="k">return</span> <span class="nx">dataRows</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kd">function</span> <span class="nx">showLoader</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">CUSTOMER_TABLE_BODY</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">LOADING_ROW_SELECTOR</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">DISPLAY_NONE_CLASS</span><span class="p">);</span>

            <span class="kd">const</span> <span class="nx">dataRows</span> <span class="o">=</span> <span class="nx">CUSTOMER_TABLE_BODY</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">CUSTOMER_ROW_SELECTOR</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">dataRows</span><span class="p">,</span>
                <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="nx">row</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">DISPLAY_NONE_CLASS</span><span class="p">);</span>
                <span class="p">});</span>
        <span class="p">}</span>

        <span class="kd">function</span> <span class="nx">showCustomerRows</span><span class="p">(</span><span class="nx">customerRows</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">customerRows</span><span class="p">,</span>
                <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="nx">row</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">DISPLAY_NONE_CLASS</span><span class="p">);</span>
                <span class="p">});</span>
            <span class="nx">CUSTOMER_TABLE_BODY</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">LOADING_ROW_SELECTOR</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">DISPLAY_NONE_CLASS</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kd">function</span> <span class="nx">filterData</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">showLoader</span><span class="p">();</span>

            <span class="kd">const</span> <span class="nx">customerRows</span> <span class="o">=</span> <span class="nx">CUSTOMER_TABLE_BODY</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">CUSTOMER_ROW_SELECTOR</span><span class="p">);</span>
            <span class="kd">const</span> <span class="nx">searchName</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#searchCustomerName'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
            <span class="kd">const</span> <span class="nx">searchEmail</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#searchEmail'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
            <span class="kd">const</span> <span class="nx">searchCountry</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#searchCountry'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>

            <span class="kd">const</span> <span class="nx">rowsToShow</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">customerRows</span><span class="p">,</span>
                <span class="kd">function</span> <span class="p">(</span><span class="nx">customerRow</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">let</span> <span class="nx">columns</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">customerRow</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'td'</span><span class="p">);</span>

                    <span class="k">return</span> <span class="nx">isMatchForFilter</span><span class="p">(</span><span class="nx">searchName</span><span class="p">,</span> <span class="nx">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
                        <span class="nx">isMatchForFilter</span><span class="p">(</span><span class="nx">searchEmail</span><span class="p">,</span> <span class="nx">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
                        <span class="nx">isMatchForFilter</span><span class="p">(</span><span class="nx">searchCountry</span><span class="p">,</span> <span class="nx">columns</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">);</span>


                <span class="p">});</span>

           <span class="nx">showCustomerRows</span><span class="p">(</span><span class="nx">rowsToShow</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kd">function</span> <span class="nx">isMatchForFilter</span><span class="p">(</span><span class="nx">searchValue</span><span class="p">,</span> <span class="nx">valueInRow</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">searchValue</span> <span class="o">===</span> <span class="s1">''</span> <span class="o">||</span>
                <span class="nx">valueInRow</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">searchValue</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">loadData</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="nt">&lt;/script&gt;</span>
}
</code></pre></div></div>

<h2 id="self-executing-functions">Self-executing functions</h2>

<p>An example of a self-executing module is shown below. The proper term for the self-executing module is Immediately Invoked Function Expressions or IIFE.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">someOtherInjectedModule</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">CURRENT_MODULE</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="kd">const</span> <span class="nx">PRIVATE_VARIABLE</span> <span class="o">=</span> <span class="s1">'Hello world!'</span><span class="p">;</span>

    <span class="nx">CURRENT_MODULE</span><span class="p">.</span><span class="nx">myPublicFunction</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">privateFunction</span><span class="p">();</span>
    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">privateFunction</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">PRIVATE_VARIABLE</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nb">window</span><span class="p">.</span><span class="nx">ModuleExample</span> <span class="o">=</span> <span class="nx">CURRENT_MODULE</span><span class="p">;</span>

<span class="p">})(</span><span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">SomeOtherModule</span><span class="p">);</span>

<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">ModuleExample</span><span class="p">.</span><span class="nx">myPublicFunction</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div></div>

<p>The function parameters make it possible to inject dependencies. This has 2 benefits.</p>

<ol>
  <li>
    <p>You can inject mocks when unit testing. This makes unit testing much easier.</p>
  </li>
  <li>
    <p>All the external dependencies, that the class relies on, are shown at the top and bottom of the file.</p>
  </li>
</ol>

<p>Another great benefit that this pattern gives is variable scoping. All variables scoped within the module are scoped to the function and do not have to be global.</p>

<p>The CURRENT_MODULE object and all its functions/properties are exposed globally by assigning it to a global window property. All the other “private” functions and variables are never exposed outside the scope of the self-executing function.</p>

<p>The  example as shown in the first code listing of this post rewritten with an IIFE is shown below.</p>

<p>A working Visual Studio project with the code listed below can be found in my <a href="https://github.com/SamanthaNeilen/JavascriptModulesExamples">JavaScriptModuleExamples repository on GitHub</a>.</p>

<p>customer-overview.js:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">customerService</span><span class="p">,</span> <span class="nx">utilitiesModule</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">CURRENT_MODULE</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="nx">CUSTOMER_ROW_SELECTOR</span> <span class="o">=</span> <span class="s1">'.customer-row'</span><span class="p">,</span>
        <span class="nx">LOADING_ROW_SELECTOR</span> <span class="o">=</span> <span class="s1">'.loading-row'</span><span class="p">,</span>
        <span class="nx">CUSTOMER_TABLE_BODY</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#customer-table-body'</span><span class="p">);</span>

    <span class="nx">CURRENT_MODULE</span><span class="p">.</span><span class="nx">initialize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">'#customerOverviewSearchButton'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="nx">CURRENT_MODULE</span><span class="p">.</span><span class="nx">filterData</span><span class="p">);</span>
        <span class="nx">CURRENT_MODULE</span><span class="p">.</span><span class="nx">loadData</span><span class="p">();</span>
    <span class="p">};</span>

    <span class="nx">CURRENT_MODULE</span><span class="p">.</span><span class="nx">loadData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">showLoader</span><span class="p">();</span>

        <span class="nx">customerService</span><span class="p">.</span><span class="nx">getCustomers</span><span class="p">(</span><span class="nx">showCustomerData</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nx">CURRENT_MODULE</span><span class="p">.</span><span class="nx">filterData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">showLoader</span><span class="p">();</span>

        <span class="kd">const</span> <span class="nx">customerRows</span> <span class="o">=</span> <span class="nx">CUSTOMER_TABLE_BODY</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">CUSTOMER_ROW_SELECTOR</span><span class="p">);</span>
        <span class="kd">const</span> <span class="nx">searchName</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#searchCustomerName'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="kd">const</span> <span class="nx">searchEmail</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#searchEmail'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="kd">const</span> <span class="nx">searchCountry</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#searchCountry'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>

        <span class="kd">const</span> <span class="nx">rowsToShow</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">customerRows</span><span class="p">,</span>
            <span class="kd">function</span> <span class="p">(</span><span class="nx">customerRow</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">const</span> <span class="nx">columns</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">customerRow</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'td'</span><span class="p">);</span>

                <span class="k">return</span> <span class="nx">utilitiesModule</span><span class="p">.</span><span class="nx">isMatchForFilter</span><span class="p">(</span><span class="nx">searchName</span><span class="p">,</span> <span class="nx">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
                    <span class="nx">utilitiesModule</span><span class="p">.</span><span class="nx">isMatchForFilter</span><span class="p">(</span><span class="nx">searchEmail</span><span class="p">,</span> <span class="nx">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
                    <span class="nx">utilitiesModule</span><span class="p">.</span><span class="nx">isMatchForFilter</span><span class="p">(</span><span class="nx">searchCountry</span><span class="p">,</span> <span class="nx">columns</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">);</span>
            <span class="p">});</span>

        <span class="nx">showCustomerRows</span><span class="p">(</span><span class="nx">rowsToShow</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">showCustomerData</span><span class="p">(</span><span class="nx">customerList</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">CUSTOMER_TABLE_BODY</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">getDataRows</span><span class="p">(</span><span class="nx">customerList</span><span class="p">));</span>
        <span class="nx">showCustomerRows</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">getDataRows</span><span class="p">(</span><span class="nx">customerList</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">outerHtmlProperty</span> <span class="o">=</span> <span class="s1">'outerHTML'</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">dataRowTemplateId</span> <span class="o">=</span> <span class="s1">'data-row-template'</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">rowTemplate</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#'</span> <span class="o">+</span> <span class="nx">dataRowTemplateId</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="nx">outerHtmlProperty</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'id="'</span> <span class="o">+</span> <span class="nx">dataRowTemplateId</span> <span class="o">+</span> <span class="s1">'"'</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>

        <span class="kd">let</span> <span class="nx">dataRows</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">LOADING_ROW_SELECTOR</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="nx">outerHtmlProperty</span><span class="p">);</span>

        <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">customerList</span><span class="p">,</span>
            <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">customer</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">dataRows</span> <span class="o">+=</span> <span class="nx">rowTemplate</span>
                    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'{name}'</span><span class="p">,</span> <span class="nx">customer</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'{email}'</span><span class="p">,</span> <span class="nx">customer</span><span class="p">.</span><span class="nx">email</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'{country}'</span><span class="p">,</span> <span class="nx">customer</span><span class="p">.</span><span class="nx">country</span><span class="p">);</span>
            <span class="p">});</span>

        <span class="k">return</span> <span class="nx">dataRows</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">showLoader</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">utilitiesModule</span><span class="p">.</span><span class="nx">showElement</span><span class="p">(</span><span class="nx">LOADING_ROW_SELECTOR</span><span class="p">,</span> <span class="nx">CUSTOMER_TABLE_BODY</span><span class="p">);</span>

        <span class="nx">forEachCustomerRow</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">utilitiesModule</span><span class="p">.</span><span class="nx">hideElement</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">CUSTOMER_TABLE_BODY</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">showCustomerRows</span><span class="p">(</span><span class="nx">filteredRows</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">forEachCustomerRow</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">utilitiesModule</span><span class="p">.</span><span class="nx">showElement</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">CUSTOMER_TABLE_BODY</span><span class="p">);</span>
        <span class="p">},</span> <span class="nx">filteredRows</span><span class="p">);</span>

        <span class="nx">utilitiesModule</span><span class="p">.</span><span class="nx">hideElement</span><span class="p">(</span><span class="nx">LOADING_ROW_SELECTOR</span><span class="p">,</span> <span class="nx">CUSTOMER_TABLE_BODY</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">forEachCustomerRow</span><span class="p">(</span><span class="nx">callBack</span><span class="p">,</span> <span class="nx">filteredRows</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">customerRows</span> <span class="o">=</span> <span class="nx">CUSTOMER_TABLE_BODY</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">CUSTOMER_ROW_SELECTOR</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">filteredRows</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">customerRows</span> <span class="o">=</span> <span class="nx">filteredRows</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">customerRows</span><span class="p">,</span>
            <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">callBack</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">row</span><span class="p">));</span>
            <span class="p">});</span>
    <span class="p">}</span>

    <span class="nb">window</span><span class="p">.</span><span class="nx">customerOverviewModule</span> <span class="o">=</span> <span class="nx">CURRENT_MODULE</span><span class="p">;</span>

<span class="p">})(</span><span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">customerService</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">utilitiesModule</span><span class="p">);</span>

<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">customerOverviewModule</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div></div>
<p>utilities.js</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">CURRENT_MODULE</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="nx">DISPLAY_NONE_CLASS</span> <span class="o">=</span> <span class="s1">'display-none'</span><span class="p">;</span>

    <span class="nx">CURRENT_MODULE</span><span class="p">.</span><span class="nx">isMatchForFilter</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">searchValue</span><span class="p">,</span> <span class="nx">valueInRow</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">searchValue</span> <span class="o">===</span> <span class="s1">''</span> <span class="o">||</span>
            <span class="nx">valueInRow</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">searchValue</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="nx">CURRENT_MODULE</span><span class="p">.</span><span class="nx">hideElement</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">elementSelector</span><span class="p">,</span> <span class="nx">parentSelector</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">getParent</span><span class="p">(</span><span class="nx">parentSelector</span><span class="p">);</span>
        <span class="nx">parent</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">elementSelector</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">DISPLAY_NONE_CLASS</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nx">CURRENT_MODULE</span><span class="p">.</span><span class="nx">showElement</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">elementSelector</span><span class="p">,</span> <span class="nx">parentSelector</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">getParent</span><span class="p">(</span><span class="nx">parentSelector</span><span class="p">);</span>
        <span class="nx">parent</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">elementSelector</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">DISPLAY_NONE_CLASS</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">getParent</span><span class="p">(</span><span class="nx">parentSelector</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">parentSelector</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">parent</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">parentSelector</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">parent</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nb">window</span><span class="p">.</span><span class="nx">utilitiesModule</span> <span class="o">=</span> <span class="nx">CURRENT_MODULE</span><span class="p">;</span>
<span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>
</code></pre></div></div>
<p>customer-service.js</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">CURRENT_MODULE</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="nx">CUSTOMER_URI</span> <span class="o">=</span> <span class="s1">'https://localhost:44313/api/customer'</span><span class="p">;</span>

    <span class="nx">CURRENT_MODULE</span><span class="p">.</span><span class="nx">getCustomers</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">successCallBack</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">CUSTOMER_URI</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">customerList</span><span class="p">,</span> <span class="nx">textStatus</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">successCallBack</span><span class="p">(</span><span class="nx">customerList</span><span class="p">);</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">textStatus</span><span class="p">,</span> <span class="nx">errorThrown</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">alert</span><span class="p">(</span><span class="s1">'error '</span> <span class="o">+</span> <span class="nx">textStatus</span> <span class="o">+</span> <span class="s1">' '</span> <span class="o">+</span> <span class="nx">errorThrown</span><span class="p">);</span>
            <span class="p">});</span>
    <span class="p">};</span>
  
    <span class="nb">window</span><span class="p">.</span><span class="nx">customerService</span> <span class="o">=</span> <span class="nx">CURRENT_MODULE</span><span class="p">;</span>
<span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>
</code></pre></div></div>

<p>index.cshtml:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Customer overview<span class="nt">&lt;/h1&gt;</span>

    @* Searchform *@
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"search-customer"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"searchCustomerName"</span> <span class="na">class=</span><span class="s">"col-sm-2 col-form-label"</span><span class="nt">&gt;</span>@Texts.Name<span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-5"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"searchCustomerName"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"searchEmail"</span> <span class="na">class=</span><span class="s">"col-sm-2 col-form-label"</span><span class="nt">&gt;</span>@Texts.Email<span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-5"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"searchEmail"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"searchCountry"</span> <span class="na">class=</span><span class="s">"col-sm-2 col-form-label"</span><span class="nt">&gt;</span>@Texts.Country<span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-5"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"searchCountry"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"customerOverviewSearchButton"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-sm btn-primary col-sm-2"</span><span class="nt">&gt;</span>@Texts.Search<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    @* Grid for data *@
    <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"table mt-2"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;thead&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;th</span> <span class="na">scope=</span><span class="s">"col"</span><span class="nt">&gt;</span>@Texts.Name<span class="nt">&lt;/th&gt;</span>
                <span class="nt">&lt;th</span> <span class="na">scope=</span><span class="s">"col"</span><span class="nt">&gt;</span>@Texts.Email<span class="nt">&lt;/th&gt;</span>
                <span class="nt">&lt;th</span> <span class="na">scope=</span><span class="s">"col"</span><span class="nt">&gt;</span>@Texts.Country<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;/thead&gt;</span>
        <span class="nt">&lt;tbody</span> <span class="na">id=</span><span class="s">"customer-table-body"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">"loading-row"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">colspan=</span><span class="s">"3"</span><span class="nt">&gt;&lt;progress&gt;&lt;/progress&gt;&lt;/td&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;/tbody&gt;</span>
    <span class="nt">&lt;/table&gt;</span>

    @* Row templates *@
    <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"display-none"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tr</span> <span class="na">id=</span><span class="s">"data-row-template"</span> <span class="na">class=</span><span class="s">"customer-row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;td&gt;</span>{name}<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td&gt;</span>{email}<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td&gt;</span>{country}<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;/table&gt;</span>
<span class="nt">&lt;/div&gt;</span>

@section Scripts {
    <span class="nt">&lt;environment</span> <span class="na">include=</span><span class="s">"Development"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"~/js/utilities.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"~/js/customer-service.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"~/js/customer-overview.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/environment&gt;</span>
    <span class="nt">&lt;environment</span> <span class="na">exclude=</span><span class="s">"Development"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"~/js/dist/customer-overview.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/environment&gt;</span>
}
</code></pre></div></div>
<p>bundleconfig.json (to generate the minified file in de dist folder)</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"outputFileName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wwwroot/css/site.min.css"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inputFiles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"wwwroot/css/site.css"</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"outputFileName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wwwroot/js/dist/customer-overview.min.js"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inputFiles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"wwwroot/js/utilities.js"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"wwwroot/js/customer-service.js"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"wwwroot/js/customer-overview.js"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"minify"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"renameLocals"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"sourceMap"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>
<h2 id="separating-html-control-events-and-javascript-hook-ups">Separating HTML control events and JavaScript hook-ups</h2>

<p>When embedding JavaScript in the HTML pages, the event hookups are usually written directly in the controls, mixing markup with the JavaScript. In my opinion, this makes it harder to find how and where my JavaScript functions are used.</p>

<p>By hooking up al the events in the JavaScript module there’s no need to embed any JavaScript in the markup for the page. The HTML markup is only used for layout. The functionality and/or interaction logic is completely separate and centralized in the JavaScript modules.</p>

<p>There are still dependencies between the DOM and the JavaScript module but the test framework I have been using (Jest) provides a DOM mock. The DOM mock can be accessed like the browser DOM and you can test the interactions and their results. I’ll show examples in my next blog post.</p>

<p>The example page with embedded JavaScript, rewritten with an IIFE is shown below.</p>

<p>Event hookup before (in the html):</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-sm btn-primary col-sm-2"</span> <span class="na">onclick=</span><span class="s">"window.customerOverviewModule.filterData()"</span><span class="nt">&gt;</span>@Texts.Search<span class="nt">&lt;/button&gt;</span>
</code></pre></div></div>

<p>Event hookup after refactoring to the IIFE:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"customerOverviewSearchButton"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-sm btn-primary col-sm-2"</span><span class="nt">&gt;</span>@Texts.Search<span class="nt">&lt;/button&gt;</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">customerService</span><span class="p">,</span> <span class="nx">utilitiesModule</span><span class="p">)</span> <span class="p">{</span>

     <span class="c1">///...</span>
    
     <span class="nx">CURRENT_MODULE</span><span class="p">.</span><span class="nx">initialize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">'#customerOverviewSearchButton'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="nx">CURRENT_MODULE</span><span class="p">.</span><span class="nx">filterData</span><span class="p">);</span>
        
        <span class="nx">CURRENT_MODULE</span><span class="p">.</span><span class="nx">loadData</span><span class="p">();</span>
    <span class="p">};</span>

     <span class="nx">CURRENT_MODULE</span><span class="p">.</span><span class="nx">loadData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
         <span class="c1">///...</span>
     <span class="p">};</span>
    
     <span class="nx">CURRENT_MODULE</span><span class="p">.</span><span class="nx">filterData</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
     	<span class="c1">///...</span>
     <span class="p">};</span>
     
     <span class="c1">///...</span>
     
     <span class="nb">window</span><span class="p">.</span><span class="nx">customerOverviewModule</span> <span class="o">=</span> <span class="nx">CURRENT_MODULE</span><span class="p">;</span>

<span class="p">})(</span><span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">customerService</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">utilitiesModule</span><span class="p">);</span>

<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">customerOverviewModule</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div></div>
<h2 id="separating-html-templating-from-your-javascript-code">Separating HTML templating from your JavaScript code</h2>

<p>Sometimes you have to create multiple repeating element groups from a JavaScript array. An example is calling an API to retrieve orders then printing a line with each order object. You might define a constant with the HTML template as a string in your JavaScript. For maintainability, code completion and analysis benefits, I find it better to just include a hidden div with the template on the page. You won’t have to deal with escaping reserved characters in a string like quotes and slashes and also gain indenting and linting support from your IDE.</p>

<p>The HTML string used before the refactoring was:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">function</span> <span class="nx">getDataRows</span><span class="p">(</span><span class="nx">customerList</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">rowTemplate</span> <span class="o">=</span> <span class="s1">'&lt;tr class="customer-row"&gt;&lt;td&gt;{name}&lt;/td&gt;&lt;td&gt;{email}&lt;/td&gt;&lt;td&gt;{country}&lt;/td&gt;&lt;/tr&gt;'</span><span class="p">;</span>
            <span class="kd">let</span> <span class="nx">dataRows</span> <span class="o">=</span> <span class="s1">'&lt;tr class="loading-row"&gt;&lt;td colspan="3"&gt;&lt;progress&gt;&lt;/progress&gt;&lt;/td&gt;&lt;/tr&gt;'</span><span class="p">;</span>

            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">customerList</span><span class="p">,</span>
                <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">customer</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">dataRows</span> <span class="o">+=</span> <span class="nx">rowTemplate</span>
                        <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'{name}'</span><span class="p">,</span> <span class="nx">customer</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'{email}'</span><span class="p">,</span> <span class="nx">customer</span><span class="p">.</span><span class="nx">email</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'{country}'</span><span class="p">,</span> <span class="nx">customer</span><span class="p">.</span><span class="nx">country</span><span class="p">);</span>
                <span class="p">});</span>

            <span class="k">return</span> <span class="nx">dataRows</span><span class="p">;</span>
        <span class="p">}</span>
</code></pre></div></div>
<p>The code using templating from the overview page example as an IIFE  is shown below:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code> @* Grid for data *@
    <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"table mt-2"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;thead&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;th</span> <span class="na">scope=</span><span class="s">"col"</span><span class="nt">&gt;</span>@Texts.Name<span class="nt">&lt;/th&gt;</span>
                <span class="nt">&lt;th</span> <span class="na">scope=</span><span class="s">"col"</span><span class="nt">&gt;</span>@Texts.Email<span class="nt">&lt;/th&gt;</span>
                <span class="nt">&lt;th</span> <span class="na">scope=</span><span class="s">"col"</span><span class="nt">&gt;</span>@Texts.Country<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;/thead&gt;</span>
        <span class="nt">&lt;tbody</span> <span class="na">id=</span><span class="s">"customer-table-body"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">"loading-row"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">colspan=</span><span class="s">"3"</span><span class="nt">&gt;&lt;progress&gt;&lt;/progress&gt;&lt;/td&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;/tbody&gt;</span>
    <span class="nt">&lt;/table&gt;</span>

    @* Row templates *@
    <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"display-none"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tr</span> <span class="na">id=</span><span class="s">"data-row-template"</span> <span class="na">class=</span><span class="s">"customer-row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;td&gt;</span>{name}<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td&gt;</span>{email}<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td&gt;</span>{country}<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;/table&gt;</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kd">function</span> <span class="nx">getDataRows</span><span class="p">(</span><span class="nx">customerList</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">outerHtmlProperty</span> <span class="o">=</span> <span class="s1">'outerHTML'</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">dataRowTemplateId</span> <span class="o">=</span> <span class="s1">'data-row-template'</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">rowTemplate</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#'</span> <span class="o">+</span> <span class="nx">dataRowTemplateId</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="nx">outerHtmlProperty</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'id="'</span> <span class="o">+</span> <span class="nx">dataRowTemplateId</span> <span class="o">+</span> <span class="s1">'"'</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>

        <span class="kd">let</span> <span class="nx">dataRows</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">LOADING_ROW_SELECTOR</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="nx">outerHtmlProperty</span><span class="p">);</span>

        <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">customerList</span><span class="p">,</span>
            <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">customer</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">dataRows</span> <span class="o">+=</span> <span class="nx">rowTemplate</span>
                    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'{name}'</span><span class="p">,</span> <span class="nx">customer</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'{email}'</span><span class="p">,</span> <span class="nx">customer</span><span class="p">.</span><span class="nx">email</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'{country}'</span><span class="p">,</span> <span class="nx">customer</span><span class="p">.</span><span class="nx">country</span><span class="p">);</span>
            <span class="p">});</span>

        <span class="k">return</span> <span class="nx">dataRows</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div></div>

        </div>
    </article>
    
    <article>
        <header class="article-header">
            <a href="/2019/10/19/Managing-your-client-side-libraries.html">Managing your client-side libraries</a>
        </header>
        
        <span>Oct 19, 2019</span> <br />
        Tags: 
        JavaScript
        
        Stylesheets
        
        <div class="article-content">
            <p>If you start a new .NET Core Razor Pages or MVC project in Visual Studio, it will create a project containing a working starter website. However, due to the speed at which 3rd party libraries update, the included version of Bootstrap and jQuery will probably be out of date. There will also be an empty site stylesheet and JavaScript file with their nested minified equivalents. These placeholder files will not update their minified counterparts if you don’t configure a minifyer.  In this blog post, I explain the tags used for referencing client-side libraries, how to use LibMan for 3rd party client-side libraries and how to use BuildBundlerMinifier to bundle and minify files in your project.</p>

<p><strong>Table of contents:</strong></p>
<ul id="markdown-toc">
  <li><a href="#how-the-script-and-stylesheets-are-referenced-in-the-view-files" id="markdown-toc-how-the-script-and-stylesheets-are-referenced-in-the-view-files">How the script and stylesheets are referenced in the view files.</a></li>
  <li><a href="#managing-3rd-party-client-side-libraries-with-libman" id="markdown-toc-managing-3rd-party-client-side-libraries-with-libman">Managing 3rd party Client-Side libraries with LibMan</a></li>
  <li><a href="#how-to-bundle-and-minify-your-custom-scripts" id="markdown-toc-how-to-bundle-and-minify-your-custom-scripts">How to bundle and minify your custom scripts</a></li>
</ul>
<h3 id="how-the-script-and-stylesheets-are-referenced-in-the-view-files">How the script and stylesheets are referenced in the view files.</h3>

<p>.NET Core projects use the syntax below in the _Layout.cshtml to include 3rd party client-side libraries.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span> 
    <span class="nt">&lt;environment</span> <span class="na">include=</span><span class="s">"Development"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"~/lib/bootstrap/dist/css/bootstrap.css"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/environment&gt;</span>
    <span class="nt">&lt;environment</span> <span class="na">exclude=</span><span class="s">"Development"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"</span>
              <span class="na">asp-fallback-href=</span><span class="s">"~/lib/bootstrap/dist/css/bootstrap.min.css"</span>
              <span class="na">asp-fallback-test-class=</span><span class="s">"sr-only"</span> <span class="na">asp-fallback-test-property=</span><span class="s">"position"</span> <span class="na">asp-fallback-test-value=</span><span class="s">"absolute"</span>
              <span class="na">crossorigin=</span><span class="s">"anonymous"</span>
              <span class="na">integrity=</span><span class="s">"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/environment&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"~/css/site.css"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

    <span class="nt">&lt;environment</span> <span class="na">include=</span><span class="s">"Development"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"~/lib/jquery/dist/jquery.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"~/lib/bootstrap/dist/js/bootstrap.bundle.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/environment&gt;</span>
    <span class="nt">&lt;environment</span> <span class="na">exclude=</span><span class="s">"Development"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"</span>
                <span class="na">asp-fallback-src=</span><span class="s">"~/lib/jquery/dist/jquery.min.js"</span>
                <span class="na">asp-fallback-test=</span><span class="s">"window.jQuery"</span>
                <span class="na">crossorigin=</span><span class="s">"anonymous"</span>
                <span class="na">integrity=</span><span class="s">"sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"</span>
                <span class="na">asp-fallback-src=</span><span class="s">"~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"</span>
                <span class="na">asp-fallback-test=</span><span class="s">"window.jQuery &amp;&amp; window.jQuery.fn &amp;&amp; window.jQuery.fn.modal"</span>
                <span class="na">crossorigin=</span><span class="s">"anonymous"</span>
                <span class="na">integrity=</span><span class="s">"sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/script&gt;</span>
    <span class="nt">&lt;/environment&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"~/js/site.js"</span> <span class="na">asp-append-version=</span><span class="s">"true"</span><span class="nt">&gt;&lt;/script&gt;</span>

    @RenderSection("Scripts", required: false)
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>Notice the environment elements. When using the development environment, the local unminified files are used. For all other environments, it uses a CDN (content delivery network) link to a minified file. The value of “environment” is an environment variable and can be set via the Debug tab in the property pages or by changing the Properties/launchsettings file. For more information on using the environment variable see <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/environments">the Microsoft docs page on this variable</a>.</p>

<p>The asp-fallback-test attribute will check if a CSS class or JavaScript function for that specific file is available. If the test fails it will load the (local) script file that is defined in the asp-fallback-src attribute. For more information on the benefits of using the CDN and to dive deeper into the fallback attributes see the <a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/built-in/link-tag-helper">Microsoft Docs page for the Link Tag Helper</a>.</p>

<p>The crossorigin attribute is always anonymous unless a cookie or user credentials are required to access the file from the remote location. For more information on this attribute see the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes">MDN docs page for the crossorigin attribute</a>.</p>

<p>The integrity attribute is probably the most important to know about in regard to upgrading library versions. The value of this attribute is a cryptographic hash that matches the contents for the file referenced file. If the referenced file and the hash no longer match up, the browser will see the file as a security compromise and block it. For more information on the integrity attribute, see <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity">the MDN docs page for the integrity attribute</a>. This page also has instructions and links for getting the appropriate hash for the files that you are trying to reference and embed on your website.</p>

<h3 id="managing-3rd-party-client-side-libraries-with-libman">Managing 3rd party Client-Side libraries with LibMan</h3>

<p>We used to manage front-end libraries with NuGet or include files manually. These days Visual Studio has support for LibMan for managing client-side libraries from several sources in a .NET Core web project. LibMan already has a basic <a href="https://docs.microsoft.com/en-us/aspnet/core/client-side/libman/libman-vs">“Getting started” guide on Microsoft Docs</a> so I will not be repeating the information contained in this post.</p>

<p>If you need packages from NPM that have multiple dependencies, then LibMan (unpkg/jsDelivr source) will not crawl those dependencies and include any  of them. My advice is to just use NPM in that case. Also, try to stick to a single client-side package manager when possible for your project. This way the team won’t get confused about how the libraries are managed.</p>

<p>LibMan is good at managing libraries without extra dependencies from cdnjs or other CDNs. If you use the “Add -&gt; Client-Side library” option you get a visual editor however the “Manage Client-Side libraries” option will just open the libman.json file. This is something I found confusing at first. It turns out that the code completion in the JSON file provides the same experience as the visual editor. (It does, however, take a few minutes for the IntelliSense to fetch the results from the provider. So, if you’re not seeing the list of libraries or files, just wait a minute.)</p>

<p>A few screenshots comparing the visual editor vs the libman.json experience:</p>

<p><img src="/assets/images/20191019/ComparingLibrarySearch.png" alt="[Comparing library search]" /></p>

<p><img src="/assets/images/20191019/ComparingVersionSearch.png" alt="[Comparing version search]" /></p>

<p><img src="/assets/images/20191019/ComparingFileSelection.png" alt="[Comparing file selection]" /></p>

<p>LibMan has out-of-the-box support for several sources but you can use the filesystem source if you need a file from another source. See the screenshot below for an example. The filesystem fallback only works with a complete URL to a single file in the library input field. (It will not work with wildcards or a directory).</p>

<p><img src="/assets/images/20191019/FilesystemSearch.png" alt="[Visual editor filesystem search]" /></p>

<h3 id="how-to-bundle-and-minify-your-custom-scripts">How to bundle and minify your custom scripts</h3>

<p>When you create a new .NET Core web project in Visual Studio, an empty site.css and site.js with their minified counterparts will be added. When editing the unminified files, the minified files will not be updated with the changes made. You will need to configure an additional minification tool to enable the minification.</p>

<p>I use the <a href="https://github.com/madskristensen/BundlerMinifier">BuildBundlerMinifier</a> NuGet package to bundle and minify my own custom script and stylesheet files. To use it, first install the BuildBindlerMinifier package and add a  bundleconfig.json to the project containing the JSON contents as shown below to enable minification of the default files. Note that the input files parameter is an array, so you could provide multiple input files to bundle into one output file.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"outputFileName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wwwroot/css/site.min.css"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inputFiles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"wwwroot/css/site.css"</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"outputFileName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wwwroot/js/site.min.js"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inputFiles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"wwwroot/js/site.js"</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="s2">"minify"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"renameLocals"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"sourceMap"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>If you build the project, the minified files will be updated with the contents from the input files.</p>

<p>For information on how to configure bundling and minification for .NET Core, see <a href="https://docs.microsoft.com/en-us/aspnet/core/client-side/bundling-and-minification">the Microsoft docs pages on bundling and minification</a>.</p>


        </div>
    </article>
    
    <article>
        <header class="article-header">
            <a href="/2019/08/10/Front-end-design.html">Front-end design</a>
        </header>
        
        <span>Aug 10, 2019</span> <br />
        Tags: 
        UX
        
        UserInterface
        
        <div class="article-content">
            <p><strong>Table of contents:</strong></p>
<ul id="markdown-toc">
  <li><a href="#bootstrap" id="markdown-toc-bootstrap">Bootstrap</a></li>
  <li><a href="#office-fabric-core" id="markdown-toc-office-fabric-core">Office Fabric (Core)</a></li>
  <li><a href="#material-design" id="markdown-toc-material-design">Material Design</a></li>
  <li><a href="#icon-sets" id="markdown-toc-icon-sets">Icon sets</a></li>
  <li><a href="#further-reading-and-research" id="markdown-toc-further-reading-and-research">Further reading and research</a></li>
</ul>

<h3 id="bootstrap"><a href="https://getbootstrap.com/">Bootstrap</a></h3>

<p>When creating a new website with .NET Core, the template will already contain the Bootstrap design framework. This framework uses a grid system for creating a layout, has some out-of-the-box styled controls like dropdowns and tabs and has an icon set to use. Next to the default color scheme, it has some guidance on how to create your own color schemes. Bootstrap also has an eco-system of templates based on Bootstrap to get inspiration for your own designs.</p>

<h3 id="office-fabric-core"><a href="https://developer.microsoft.com/en-us/fabric#/get-started">Office Fabric (Core)</a></h3>

<p>Another framework like Bootstrap is Office Fabric. This is a front-end design framework from Microsoft that can be used to design a website to look like an Office 365 application. This can be especially useful if you are creating a SharePoint hosted app or if you are creating  an app in an enterprise environment where users use a lot of the Office 365 websites. Users will get a certain feeling of consistency between all the applications and recognize iconography. The Core framework is a stylesheet that comes with a grid system, fonts, animation classes and an icon set that is used in Office 365 and contains icons for most Office applications. The website for Office Fabric also lists the colors for the Microsoft application. There are also out-of-the-box web controls, but these use the React framework. The controls that use just vanilla JavaScript have been marked deprecated.</p>

<h3 id="material-design"><a href="https://material.io/design/">Material Design</a></h3>

<p>Material Design is a set of design guidelines by Google. There are several Bootstrap implementations that use these guidelines. They give you easy access to an implementation of these guidelines for your application. <a href="https://mdbootstrap.com/docs/jquery/components/demo/">Use this link for an overview of a few Bootstrap components with Material Design applied</a>. The provided link points to an implementation that has several implementations (free or paid) using JQuery, Angular, React and Vue.</p>

<h3 id="icon-sets">Icon sets</h3>

<p>When using one of the above design frameworks (or just using your own design), you may have need of some icons as a visual aid for a user. The links below point to some icon sets that you could use. When using icons from different frameworks or sources be aware that, just like fonts, icons from a different set may have a different line or edge shape. Mixing and matching icons from different sets may break the feeling of consistency for your user. If you really need or want to use an icon from a different set that you are already using, consider changing all or all related current icons to the new set. By related icons I mean the ones whose functionality or concept is similar and are usually near each other on the page.</p>

<ul>
  <li><a href="https://fontawesome.com/">Font awesome icons</a></li>
  <li><a href="https://ionicons.com/">Ion icons</a></li>
</ul>

<h3 id="further-reading-and-research">Further reading and research</h3>

<p>The design frameworks in mentioned in this post adhere to a certain style and UX (user-experience) guidelines to help you create nicer looking sites. Using these frameworks is a good way of getting started but is not a sure way to create a good looking and usable site. Some links and resources to further content on what makes “good design” and “good user-experience” can be found listed below.</p>

<ul>
  <li><a href="https://www.uxbooth.com/articles/8-must-see-ux-diagrams/">Blogpost about 8 different UX diagrams</a>: The UX diagrams mentioned in this post are a good starting point for discovering some theories and guidelines for good UX.</li>
  <li><a href="https://www.amazon.com/dp/9490947725/ref=cm_sw_em_r_mt_dp_U_0KNtDb84VSDWY">The book Visual language</a>: This book is a great read if you are interested in how people perceive visual information. It also has some concrete guidelines and examples on how to design a website or magazine.</li>
  <li><a href="https://www.darkpatterns.org/types-of-dark-pattern">A website about Dark patterns</a>: This website contains a list of dark patterns for website design. Dark patterns are ways to fool or confuse a user and should be avoided.</li>
  <li><a href="https://userinyerface.com/">The userinyerface.com game</a>: As heard on the <a href="https://msdevshow.com/2019/07/graph-toolkit-with-nikola-metulev/">MS Dev Show episode talking about the Microsoft Graph web controls</a>. This game challenges you on navigating through a form with a very bad design.</li>
</ul>

<p>And some links to podcast episodes about user interface/ user-experience design:</p>

<ul>
  <li><a href="https://www.codenewbie.org/podcast/why-you-should-understand-user-interface-and-design">CodeNewbie: Why you should understand user interface and design with Mina Markham</a></li>
  <li><a href="https://www.codenewbie.org/podcast/ux-in-healthcare">CodeNewbie: UX in healthcare with Danielle Smith</a></li>
  <li><a href="https://learntocodewith.me/podcast/product-design/">Learn to code with me: How to break into product design with Lenora Porter</a></li>
  <li><a href="https://dotnetrocks.com/?show=1618">DotNet Rocks: UX Design for Developers with Billy Hollis</a></li>
  <li><a href="https://dotnetrocks.com/?show=1643">DotNet Rocks: Integrating UX in your Development Process with Debbie Levitt</a></li>
  <li><a href="https://completedeveloperpodcast.com/episode-175/">Complete Developer Podcast: Dark Patterns in UI Design</a></li>
  <li><a href="https://hanselminutes.com/602/web-animation-at-work-with-rachel-nabors">Hanselminutes: Web Animation at Work with Rachel Nabors</a></li>
</ul>

        </div>
    </article>
    
    <article>
        <header class="article-header">
            <a href="/2019/06/22/Static-code-analysis-for-your-csharp-projects.html">Static code analysis for your C# projects</a>
        </header>
        
        <span>Jun 22, 2019</span> <br />
        Tags: 
        VisualStudio
        
        StaticCodeAnalysis
        
        <div class="article-content">
            <p>Static code analysis analyzes your source code or compiled DLL files for certain patterns or filenames. There are several code analyzers available for C# in Visual Studio and/or Azure DevOps. These code analyzers improve consistency, prevent technical debt and prevent security issues.</p>

<p>The older Code Analysis features in Visual Studio (Analyze &gt; Run Code Analysis option) and Project properties (Code Analysis tab) are marked as deprecated and will not be covered in this post.</p>

<p><strong>Table of contents:</strong></p>
<ul id="markdown-toc">
  <li><a href="#visual-studio-built-in-analyzers" id="markdown-toc-visual-studio-built-in-analyzers">Visual Studio built-in analyzers</a></li>
  <li><a href="#sonarlint" id="markdown-toc-sonarlint">SonarLint</a></li>
  <li><a href="#sonarqube" id="markdown-toc-sonarqube">SonarQube</a></li>
  <li><a href="#security-code-scan" id="markdown-toc-security-code-scan">Security Code Scan</a></li>
  <li><a href="#auditnet" id="markdown-toc-auditnet">Audit.NET</a></li>
  <li><a href="#whitesource-bolt" id="markdown-toc-whitesource-bolt">WhiteSource Bolt</a></li>
</ul>

<h3 id="visual-studio-built-in-analyzers">Visual Studio built-in analyzers</h3>

<p>The Visual Studio compiler (Roslyn) already has some built-in analyzer rules. When loading a project (like the <a href="https://github.com/dotnet-architecture/eShopOnWeb">eShopOnWeb</a> reference implementation) and opening a file, the analyzers installed in Visual Studio will analyze the file and show any error, warning or information message in the Visual Studio error list window.</p>

<p><img src="/assets/images/20190622/Default-style-messages.png" alt="[Default style messages]" /></p>

<p>By default, Visual Studio will only contain some analyzers for code styling that output as information messages. You can edit the default code analyzer rules in the Visual Studio options via:</p>

<p>Tools &gt; Options &gt; Text Editor &gt; C# &gt; Code Style</p>

<p><img src="/assets/images/20190622/Default-style-messages-settings.png" alt="[Default style messages settings]" /></p>

<p>The severity of the ruleset can be changed in this options window:</p>

<p><img src="/assets/images/20190622/Default-style-messages-set-to-warning.png" alt="[Default style messages settings set severity]" /></p>

<p>By default, it only analyzes the open file but you can enable solution-wide analysis in the Visual Studio options to asynchronously analyze the entire solution. This option is found via:</p>

<p>Tools &gt; Options &gt; Text Editor &gt; C# &gt; Advanced &gt; Enable full solution analysis</p>

<p><img src="/assets/images/20190622/Enable-full-solution-analysis.png" alt="[Enable full solution analysis]" /></p>

<p>If you use Visual Studio 2019 and you have set rules resulting in errors or warnings, you will also see a counter at the bottom of the file alerting you to issues in the files. There are also the colored squiggly lines in the text editor below the statement that may have and issue. There are colored blocks in the scrollbar of the text editor indicating where the issues are located in a file. And if you have the <a href="https://marketplace.visualstudio.com/items?itemName=VisualStudioPlatformTeam.ProductivityPowerPack2017">Productivity Power Tools</a> extension installed the Solution Error Visualization will show the same colored squiggly lines in the Solution Explorer window below filenames that have issues.</p>

<p>I have marked all visual indicators for errors and or warnings in the screenshot below:</p>

<p><img src="/assets/images/20190622/Visual-indicators-for-issues.png" alt="[Visual indicators for warnings or errors]" /></p>

<h3 id="sonarlint">SonarLint</h3>

<p>For extra code analysis, I use the <a href="https://www.sonarlint.org/visualstudio/">SonarLint extension</a> in Visual Studio. This extension loads extra code analysis rules for several categories (code smells, bugs and security issues). For the full list see the <a href="https://rules.sonarsource.com/csharp">SonarSource rules pages</a>. Rules from SonarLint can be identified by the S prefix in the Error list window.</p>

<p><img src="/assets/images/20190622/SonarLint-messages.png" alt="[SonarLint warnings example]" /></p>

<p>You can use a .ruleset file in your project to disable or change the default severities or disable warnings for the default rules. See the <a href="https://docs.microsoft.com/en-us/visualstudio/code-quality/how-to-create-a-custom-rule-set">Microsoft Docs page for adding ruleset files</a> for more instructions.</p>

<p>When using SonarLint, I usually enable the category column in my error list window to triage the warnings shown. You can right-click the error list window and use the option Show Columns &gt; Category to add it.</p>

<p><img src="/assets/images/20190622/Add-Category-column-to-error-list.png" alt="[Add Category column to error list]" /></p>

<h3 id="sonarqube">SonarQube</h3>

<p>The SonarLint extension also enables integration with a <a href="https://www.sonarqube.org/">SonarQube server</a>. SonarQube is open source static code analysis platform that can integrate <a href="https://www.sonarlint.org/visualstudio/#visualstudio-connected-mode">with Visual Studio</a> and <a href="https://www.azuredevopslabs.com/labs/vstsextend/sonarqube/">with Azure DevOps</a>. SonarQube can be used to define a ruleset that all team members can download into new or existing projects. SonarQube (when integrating with Azure DevOps) can also provide code coverage metrics and code duplication analysis. It can also provide insight into the number of issues over time and provides a technical debt score for a solution. You can also fail a build if your solution does not meet a configured quality gate. SonarQube is great in providing code analysis and related dashboards especially when working with a team on a code project. See the <a href="https://www.sonarqube.org/">SonarQube</a> website for all the features and installation instructions.</p>

<h3 id="security-code-scan">Security Code Scan</h3>

<p><a href="https://security-code-scan.github.io/">Security Code Scan</a> is a static analyzer extension focusing on security issues in your code. It checks for patterns that indicate SQL injection or XSS vulnerabilities in your code and several other issues that are defined by <a href="https://www.owasp.org/index.php/Main_Page">OWASP</a> as security issues.</p>

<p>After installing the extension (and enabling full solution-wide analysis) the warnings from Security Code Scan are listed with the prefix SCS.</p>

<p><img src="/assets/images/20190622/Security-Code-Scan-messages.png" alt="[Security Code Scan messages]" /></p>

<h3 id="auditnet">Audit.NET</h3>

<p><a href="https://github.com/OSSIndex/audit.NET">Audit.NET</a> is an <a href="https://marketplace.visualstudio.com/items?itemName=VorSecurity.AuditNet">extension for Visual Studio</a> that scans your package.config file and compares the package references against several public databases containing known vulnerabilities. Any issues with packages are shown in the Error window as errors. These errors are not blocking and will not result prevent you from building, debugging or running your solutions.</p>

<p><img src="/assets/images/20190622/AuditNET-errors.png" alt="[Audit.NET messages]" /></p>

<p>At the time of this writing, the extension can analyze .NET Core projects (and the new package references) but it does not seem to properly show the current issues in the error window.</p>

<h3 id="whitesource-bolt">WhiteSource Bolt</h3>

<p><a href="https://bolt.whitesourcesoftware.com/azure/">WhiteSoure Bolt</a> is the free version of WhiteSource and can be integrated <a href="https://www.azuredevopslabs.com/labs/vstsextend/whitesource/">with Azure DevOps</a>. The free version can be used in a commercial environment but beware of the <a href="https://bolt.whitesourcesoftware.com/azure/terms/">terms of service</a> data and usage policies as it does send and store metadata and file hashes to WhiteSource hosted in America. This may be an issue in certain corporate environments (especially in Europe).</p>

<p>WhiteSource Bolt analyzes your project and will report on NuGet packages or included DLL files with known vulnerabilities. It will also give you an overview of all used 3rd party components and their licenses.</p>

<p>See <a href="https://www.azuredevopslabs.com/labs/vstsextend/whitesource/">the Azure DevOps labs last step of the Trigger a build section</a> for screenshots of the report for a build.</p>


        </div>
    </article>
    
    <article>
        <header class="article-header">
            <a href="/2019/05/06/Techniques-for-determining-test-scenarios.html">Techniques for determining test scenarios</a>
        </header>
        
        <span>May 6, 2019</span> <br />
        Tags: 
        Testing
        
        <div class="article-content">
            <p>Usually, I think of test scenarios while examining specifications and writing code. Even though I am not a test first TDD practitioner and usually write and executing tests after writing some logic, I do think about and test scenarios throughout my coding  process.</p>

<p>The techniques I want to describe in this post have been helpful to me in writing better quality code. They help me catch missing requirements earlier and my eventual tests (manual or automated) are more complete. Knowing these techniques also helps me collaborate better with the QA team during development and/or testing.</p>

<p>The techniques may describe graphing out paths and making decision tables but I almost never write down the described graphs and tables. If you find yourself having trouble identifying or explaining scenarios, the described graph or table might help you as a means of visual aid.</p>

<p>The techniques are described identifying all possible test scenarios for 100% coverage. Analyzing and testing all scenarios (manual or automatic) is usually not possible due to time constraints. You should always try to focus on the parts of the software that are most likely to fail due to complexity and the parts that have the highest cost to the business when they do fail. Your test set should be maintainable and provide good enough coverage so you have enough confidence in your test set. When in doubt collaborate with your team members or QA team to determine the value of test scenarios and test coverage.</p>

<p>Testing techniques are divided into white and black box techniques. White box techniques look at the actual statements of the source code to determine test cases. Black box techniques use specifications to determine if outputs are correct when providing inputs.</p>

<p><strong>Table of contents:</strong></p>
<ul id="markdown-toc">
  <li><a href="#equivalence-class-and-boundary-partitioning-black-box-technique" id="markdown-toc-equivalence-class-and-boundary-partitioning-black-box-technique">Equivalence class and boundary partitioning (black box technique)</a></li>
  <li><a href="#statement-and-decision-based-testing-white-box-techniques" id="markdown-toc-statement-and-decision-based-testing-white-box-techniques">Statement and decision-based testing (white box techniques)</a></li>
  <li><a href="#conditional-based-testing-white-box-technique" id="markdown-toc-conditional-based-testing-white-box-technique">Conditional-based testing (white box technique)</a></li>
  <li><a href="#state-transition-testing-black-box-technique" id="markdown-toc-state-transition-testing-black-box-technique">State transition testing (black box technique)</a></li>
  <li><a href="#resources" id="markdown-toc-resources">Resources</a></li>
</ul>

<h3 id="equivalence-class-and-boundary-partitioning-black-box-technique">Equivalence class and boundary partitioning (black box technique)</h3>

<p>Equivalence class partitioning is a technique for partitioning possible inputs into possible valid and invalid scenarios.</p>

<p>For string input for a certain field you could identify:</p>

<p>Valid input</p>
<ul>
  <li>Input length has a minimum length of 0 (empty string) and a maximum length of 50.</li>
  <li>It contains only alphanumeric characters and no diacritics.</li>
</ul>

<p>Invalid input</p>
<ul>
  <li>Null value.String larger than 50 characters.</li>
  <li>String with diacritics or other special characters (@# etcetera).</li>
</ul>

<p>The equivalence class technique states that you should create a test scenario for each of the valid and each of the invalid scenarios. If a method has multiple parameters and you are testing invalid scenarios you should never use more than one invalid input at a time to avoid defect masking.  This way you can relate expected errors back to the single invalid input or unexpected errors to one of the valid inputs.</p>

<p>Boundary partitioning is add on to equivalence class partitioning. You basically look at the equivalence classes and use the boundary value (for example string has a length of 50), boundary value -1 (string length 49) and boundary value +1 (string length 51) as additional test cases. This technique is identifying the so-called edge cases of input. You should look at all equivalence classes (valid and invalid) to determine if you can set up test cases with the boundary, boundary+1 and boundary-1, a value between 2 boundaries and see if the outputs are the expected values.</p>

<h3 id="statement-and-decision-based-testing-white-box-techniques">Statement and decision-based testing (white box techniques)</h3>

<p>Statement and decision-based testing use a <a href="https://en.wikipedia.org/wiki/Control-flow_graph">control-flow graph</a>. Basically, each node in the graph is a control statement where a decision is made about which path to execute next (so if, switch, while, for statements ). The branches (edges) of the graph are the possible code paths executed between the control statements.</p>

<p>Statement-based testing creates test scenarios for each node (not all the edges). So you should have passed through each control statement (condition is true) at least once for coverage for this technique. When looking at the source code if you pass through each control statement and execute the code within the control statements, you should end up covering all lines in the source code.</p>

<p>Decision-based testing looks to cover the edges of the control-flow graph. To cover all the edges of the graph you should create tests for each conditional state for the control statements. So for an if statement you should test with conditional false and true. For loops, you should iterate at least through one loop and use a test case that ignores the loop. When using a switch/case statements all possible cases should be covered.</p>

<p>For some good examples of these two techniques, look at the short YouTube/Udacity links in the resource section of this post.</p>

<h3 id="conditional-based-testing-white-box-technique">Conditional-based testing (white box technique)</h3>

<p>Control statements (for example if, switch, while, for statements ) usually have some kind of conditional logic. If the conditional logic has multiple inputs you can apply the rules for equivalence and boundary testing (see the previous paragraph in this post) to determine all possible inputs to the conditional statement to see if the expected path is executed.</p>

<h3 id="state-transition-testing-black-box-technique">State transition testing (black box technique)</h3>

<p>Sometimes your software uses a <a href="https://en.wikipedia.org/wiki/Finite-state_machine">finite state machine</a> (maybe some kind of status table or status enum is used to describe the possible states of an object). The linked Wikipedia article for the finite state machine contains multiple techniques for identifying the states, path between states and the conditions per path or state.</p>

<p>Each path between a state usually identifies a “happy flow” test scenario. Besides obvious valid state transitions, you should try to identify invalid paths and if they are possible to execute in the system.</p>

<p>Also, look at the conditions per path. See if you can use the rules for equivalence and boundary testing (see the previous paragraph in this post) to determine if the guards work as expected.</p>

<h3 id="resources">Resources</h3>

<ul>
  <li><a href="https://www.istqb.org/downloads/send/51-ctfl2018/208-ctfl-2018-syllabus.html">ISTQB: Foundation Level 2018 Syllabus (chapter 4 contains a list of testing techniques)</a></li>
  <li>Wikipedia:
    <ul>
      <li><a href="https://en.wikipedia.org/wiki/Equivalence_partitioning">Equivalence class partitioning</a></li>
      <li><a href="https://en.wikipedia.org/wiki/Boundary-value_analysis">Boundary value analysis</a></li>
      <li><a href="https://en.wikipedia.org/wiki/Control-flow_graph">Control-flow graph</a></li>
      <li><a href="https://en.wikipedia.org/wiki/Finite-state_machine">Finite state machine</a></li>
    </ul>
  </li>
  <li><a href="https://sqa.stackexchange.com/questions/20226/how-do-we-calculate-statement-coverage-branch-coverage-path-coverage-and-cond">StackExchange: How do we calculate Statement coverage, Branch coverage, Path coverage and Condition coverage in White box testing?</a></li>
  <li>YouTube/Udacity:
    <ul>
      <li><a href="https://www.youtube.com/watch?v=9PSrhH2gtkU">Statement Coverage - Georgia Tech - Software Development Process</a></li>
      <li><a href="https://www.youtube.com/watch?v=0lVA7TPpxUE">Control Flow Graphs - Georgia Tech - Software Development Process</a></li>
      <li><a href="https://www.youtube.com/watch?v=JkJFxPy08rk">Branch Coverage - Georgia Tech - Software Development Process</a></li>
      <li><a href="https://www.youtube.com/watch?v=ZnPmJd5aqyw">Condition Coverage - Georgia Tech - Software Development Process</a></li>
      <li><a href="https://www.youtube.com/watch?v=kd1_3CwYr60">Branch and Condition Coverage - Georgia Tech - Software Development Process</a></li>
    </ul>
  </li>
  <li><a href="https://www.softwaretestingclass.com/design-test-cases-using-state-transition-testing-technique/">Software Testing Class: How to Design Test Cases Using State Transition Testing Technique?</a></li>
  <li><a href="https://www.softwaretestingmaterial.com/state-transition-test-design-technique/">Software Testing Material: State Transition Test Case Design Technique</a></li>
</ul>


        </div>
    </article>
    
    <center><p><a href="/archive">For additional posts see the archive page for an overview of all available posts</a></p></center>
    
</div>

                </main>
            </div>
            <div class="col-md-3">
                <aside aria-label="sidebar">
                    <section class="sidebar-section">
    <h3>About me</h3>
    I am a dutch .NET developer.
    I have been coding professionally since 2008.
    On this blog, I will be writing about multiple subjects that I use in my daily programming job or subjects that I am studying.
</section>
<section class="sidebar-section">
    <h3>Social</h3>
    <a href="https://github.com/SamanthaNeilen"><i class="fa fa-github" aria-hidden="true"></i><span>&nbsp;SamanthaNeilen</span></a> <br />
    <a href="https://twitter.com/NeilenSamantha"><i class="fa fa-twitter" aria-hidden="true"></i><span>&nbsp;NeilenSamantha</span></a> <br />
    <a href="https://www.linkedin.com/in/samantha-neilen-16153713"><i class="fa fa-linkedin" aria-hidden="true"></i><span>&nbsp;Samantha Neilen</span></a><br />
    Subscribe via <a href="/feed.xml">RSS</a>
</section>
<section class="sidebar-section">
    <h3>Last posts </h3>
    
    <a href="/2019/12/30/Creating-more-maintainable-javascript-with-self-executing-functions.html">Creating more maintainable javascript with self-executing functions</a> <br />
    <div class="last-posts-spacer"></div>
    
    <a href="/2019/10/19/Managing-your-client-side-libraries.html">Managing your client-side libraries</a> <br />
    <div class="last-posts-spacer"></div>
    
    <a href="/2019/08/10/Front-end-design.html">Front-end design</a> <br />
    <div class="last-posts-spacer"></div>
    
    <a href="/2019/06/22/Static-code-analysis-for-your-csharp-projects.html">Static code analysis for your C# projects</a> <br />
    <div class="last-posts-spacer"></div>
    
    <a href="/2019/05/06/Techniques-for-determining-test-scenarios.html">Techniques for determining test scenarios</a> <br />
    <div class="last-posts-spacer"></div>
    
    <a href="/archive">Archive</a>
</section>
                </aside>
            </div>
        </div>
    </div>
</body>
</html>
