<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Samantha Neilen</title>
    <meta name="description" content="My name is Samantha Neilen, a dutch .NET developer. I have been coding professionaly since 2008. On this blog I will be writing about multiple subjects that ...">
    <link rel="stylesheet" href="/assets/css/syntax.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />
    <link rel="stylesheet" href="/assets/css/site.css" />
    <link rel="canonical" href="https://samanthaneilen.github.io/">
    <link rel="alternate" type="application/rss+xml" title="Samantha Neilen" href="/feed.xml">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
    <header aria-label="header" class="header">
        <span class="header-text">Samantha Neilen</span>
    </header>
</div>
        <div class="row">
            <div class="col-md-7 col-md-offset-1">
                <main class="page-content" aria-label="content">
                    <div>
    
    
    
    <article>
        <header class="article-header">
            <a href="/2021/01/31/Using-SoapUI-for-API-tests.html">Using SoapUI for API tests</a>
        </header>
        
        <span>Jan 31, 2021</span> <br />
        Tags: 
        WebAPI
        
        <div class="article-content">
            <p>SoapUI is an API testing tool like Postman. It’s an open-source and free API testing tool. It can be used for both SOAP and REST endpoints. You can pretty easily make repeatable calls, as you can with Postman, and save the files in source control with your API.</p>

<p>The features that make it stand out for me is the fact that you can make a TestSuite that calls several tests and the local MockServices.</p>

<p>The TestSuites make use of the out-of-the-box assertions on the responses and these assertions can be extended by either switching to a paid version or by using Groovy scripts. You can define the URL for TestSuites in project parameters so you can easily point the TestSuite to a different URL or environment.</p>

<p>You can define a local MockService to run on your local machine and have it return payloads to the application that you are testing or running. This can be very helpful when you are creating an application for an API that doesn’t exist yet.</p>

<p>The drawbacks of SoapUI are the steeper learning curve for getting started compared to Postman. The fact that these capabilities are very useful for local development but not for running the tests automatically in a deployment pipeline or deploying a mock endpoint to a test environment.</p>

<p>For more robust repeatable testing in a deployment pipeline, writing test code using C# combined with one of the testing frameworks and Selenium and/or Specflow will give you the most options. However Postman, and for extended capabilities, SoapUI will add a lot of benefits in regards to local and regression testing.</p>

<p><strong>Table of contents:</strong></p>

<ul id="markdown-toc">
  <li><a href="#creating-and-sharing-a-project" id="markdown-toc-creating-and-sharing-a-project">Creating and sharing a project</a></li>
  <li><a href="#using-custom-properties" id="markdown-toc-using-custom-properties">Using custom properties</a></li>
  <li><a href="#soapui-logging" id="markdown-toc-soapui-logging">SoapUI logging</a></li>
  <li><a href="#creating-a-testsuite" id="markdown-toc-creating-a-testsuite">Creating a TestSuite</a></li>
  <li><a href="#creating-a-mockservice" id="markdown-toc-creating-a-mockservice">Creating a Mockservice</a></li>
</ul>
<p><br /><br /></p>

<h3 id="creating-and-sharing-a-project">Creating and sharing a project</h3>

<p>When opening SoapUI, use the Empty button to create a new project. You can right-click the new project in the navigator pane to rename the project and to add a new Rest service from URI (or even a SOAP endpoint with a WSDL) . After creating the project you can add the REST service as shown in the screenshot below.</p>

<p><img src="/assets/images/20210131/NewProject.png" alt="[New project]" /><br /><br /></p>

<p><img src="/assets/images/20210131/NewRestService.png" alt="[New REST-service]" /><br /><br /></p>

<p>This will create a service with an endpoint in de project to which you can add other endpoints and several different requests per endpoint.</p>

<p>Double-click a specific request to open the Request editor to execute the request and view the response. Use the play button to execute the request and view the results on the right side of the window. You may have to select the JSON or HTML tab to see the response.</p>

<p><img src="/assets/images/20210131/NewServiceEndpointRequest.png" alt="[New service endpoint request]" /><br /><br /></p>

<p>Add extra resources (for example /API/other-path) by right-clicking the service and select the option New Resource.</p>

<p>Add extra methods to call the resource for different parameters and HTTP verbs by right-clicking the resource and selecting New Method (or New Child to create a sub-resource and then new Method).</p>

<p>Use parentheses like {id} to create a parameter in the path.</p>

<p><img src="/assets/images/20210131/ResourceWithTemplateParameter.png" alt="[Resource with template parameter]" /><br /><br /></p>

<p>Add extra requests to a method for different parameter values by right-clicking the method and then choosing the New Request option.</p>

<p>For requests using a JSON body be sure to add a Content-Type: application/JSON header to the request to ensure proper interpretation of the body content. To ensure you receive a JSON response when multiple response types are possible add an Accept: application/JSON header to the request. The Request editor contains a header tab to add these headers. See the screenshot below.</p>

<p><img src="/assets/images/20210131/AddHeader.png" alt="[Add header]" /><br /><br /></p>

<p>In the screenshot below, I have added a request for each of the Values controller endpoints to the project in the Navigator pane. The screenshot also shows a POST request and how all the parameters and settings are set in the Request editor.</p>

<p><img src="/assets/images/20210131/ProjectWithAllRequestAndRequestEditorParameters.png" alt="[Project with all requests and Requesteditor parameters]" /><br /><br /></p>

<p>When you have to wish to save the project for sharing right-click the project file in the navigator pane and select the Save Project option. This will save an XML file containing all the data. Be aware that if you set secrets in the requests that these will be embedded into the project file.</p>

<p>The project file can be opened using the Import button in the top menu of SoapUI and saved to source control or any collaboration workspace.</p>

<p>I have marked both options with a red square in the screenshot below:</p>

<p><img src="/assets/images/20210131/SaveAndImportProject.png" alt="[save and import project]" /><br /><br /></p>

<p>I have added my SoapUI project file to <a href="https://github.com/SamanthaNeilen/WebApiExamples/blob/api_test_tools/Test%20files/NetCore%20WebApi%20Examples.postman_collection(no_parameters).json">my WebApi examples GitHub repository</a>  and you can try importing and running the collection on a localhost instance of that project.</p>

<h3 id="using-custom-properties">Using custom properties</h3>

<p>SoapUI allows the use of parameters on several levels to easily switch out the parameter values for the entire project, or just on a request or TestSuite.</p>

<p>The parameters or properties can be added to several levels. To see where you can add properties open the properties pane (if it’s not open already) from the left-hand lower side of SoapUI.</p>

<p><img src="/assets/images/20210131/PropertiesWindow.png" alt="[Properties window]" /><br /><br /></p>

<p>Whenever the + button is shown you can add your properties or parameters. I like to add environment URLs on the project level. You can assign these to all the requests in the project. When you change the environment parameter used all the requests will execute for the new URL. This makes it easy to switch environments.</p>

<p>For example, add the project Custom Properties as shown in the screenshot below. As you can see I reference the environment_local property in the environment property. The environment property will be used in the request templates for all the requests so only the value has to be changed to the correct environment property that you want to use. This way you always have all the environment URLs in one place without having to look them up.</p>

<p><img src="/assets/images/20210131/ProjectPropertiesEnvironments.png" alt="[Project properties environments]" /><br /><br /></p>

<p>To easily assign the environment property to all the requests in the project, double-click the API node to show the Service Viewer. Go to the Service Endpoints tab, change the fixed Endpoint value to the value {#Project#environment}, set the mode to overwrite, and select the Assign button to assign the parameter to all requests in the project. (Double-check with the Request editor to see that the parameter has indeed been assigned correctly).</p>

<p><img src="/assets/images/20210131/AssignParameter.png" alt="[Assign parameter]" /><br /><br /></p>

<p>The syntax ${#ParameterLevel#ParameterName} to assign or use a parameter value will work on most input fields within the project.</p>

<p>Parameters and properties are also invaluable for TestSuites and TestCases. I will explain these features in a later paragraph.</p>

<p>I have added my exported parameterized SoapUI file to <a href="https://github.com/SamanthaNeilen/WebApiExamples/blob/api_test_tools/Test%20files/NetCore%20WebApi%20Examples.postman_collection(no_parameters).json">my WebApi examples GitHub repository</a> and you can try importing and running the project on a localhost instance of that project.</p>

<h3 id="soapui-logging">SoapUI logging</h3>

<p>SoapUI provides several types of logging. The screenshot below shows some of the more useful logs.</p>

<p>The Raw tabs for the requests and responses show the actual URL, headers, and response content of the requests. For the request body, view the request tab. As you can see in the Raw tab for the request the URLs have been replaced by the actual values of the parameters for the send request.</p>

<p>The HTTP logging provides a text log of all the full requests and responses (though the timestamps and newline characters can make it a bit difficult to read at times).</p>

<p><img src="/assets/images/20210131/LoggingPanes.png" alt="[Logging panes]" /><br /><br /></p>

<p>These panes will help you track down the response error codes and understand specific requests that you send using the Request editor.</p>

<h3 id="creating-a-testsuite">Creating a TestSuite</h3>

<p>TestSuites are a great tool to define some simple regression tests for your API. Create a new TestSuite from the project context menu.</p>

<p><img src="/assets/images/20210131/NewTestSuite.png" alt="[New TestSuite]" /><br /><br /></p>

<p>You can add TestCases from the context menu on the new TestSuite. Each test case contains a request or a set of requests that have their responses checked for certain criteria. A test case can be a logical grouping of 1 or several requests with the same purpose like checking certain validation rules.</p>

<p>You could define and use repeatable test steps and change certain parameters for the specific case or step. See <a href="https://www.soapui.org/docs/functional-testing/modularizing-your-tests/">the Soap UI Docs on modularizing your tests</a> for more guidance.</p>

<p>The image below shows a simple TestCase with a simple Assertion.</p>

<p><img src="/assets/images/20210131/TestSuite.png" alt="[TestSuite]" /><br /><br /></p>

<p>Possible test step types are shown in the screenshot below.</p>

<p><img src="/assets/images/20210131/TestSteps.png" alt="[TestSteps]" /><br /><br /></p>

<p>The groovy steps provide extensibility by code but it does have a learning curve especially if you are not familiar with the Java programming paradigms.</p>

<p>There are already a lot of very usable out-of-the-box assertions like the HTTP code assertions, string/content comparison, JSON path, and JSON regular expressions assertions.</p>

<p>Be aware that the free version of SoapUI has limitations (as seen for all the greyed out options).</p>

<p><img src="/assets/images/20210131/ProAssertions.png" alt="[Pro assertions]" /><br /><br /></p>

<p>You can easily use the SoapUI menus on either the project to run all TestCases, a single TestSuite, or even a single TestStep with a few simple clicks.</p>

<p><img src="/assets/images/20210131/RunTests.png" alt="[Run tests]" /><br /><br /></p>

<p>Even if you just run these regression tests locally and keep the project file with the codebase you will always have a quick tool to verify whether or not everything is working as intended and even testers that don’t have a test automation background can maintain and extend these projects.</p>

<p>SoapUI also has possibilities for <a href="https://www.soapui.org/docs/security-testing/getting-started/">security tests</a>, <a href="https://www.soapui.org/docs/load-testing/concept/">load tests</a>, and <a href="https://www.soapui.org/docs/functional-testing/teststep-reference/manual-teststep/">documenting manual test steps</a> for an API. Please see the SoapUI docs linked in the previous sentence for more information on those.</p>

<h3 id="creating-a-mockservice">Creating a Mockservice</h3>

<p>A MockService is a simple local web service that is started at a certain address. You can tell the service on which endpoints to listen for requests and what responses to send back. This is a great tool when developing a consuming application where the endpoints do not yet exist or to test certain behavior (error responses) from those endpoints.</p>

<p>To create a MockService, again use the context menu on the project node in the navigation pane.</p>

<p><img src="/assets/images/20210131/NewMockService.png" alt="[New MockService]" /><br /><br /></p>

<p>The local URL at which the MockService is run can be changed from the settings.</p>

<p><img src="/assets/images/20210131/MockServiceSettings.png" alt="[MockService settings]" /><br /><br /></p>

<p>Now you can add an endpoint (mock action) through the context menu on the MockService. Omit all the query parameters from the endpoint path and set the path parameter to a fixed value. There are ways to add scripts to the MockService so it responds more dynamically to path parameters to return a proper response. See <a href="https://www.soapui.org/docs/soap-mocking/creating-dynamic-mockservices/">the SoapUI docs on creating dynamic MockServices</a> for more information.</p>

<p><img src="/assets/images/20210131/NewMockAction.png" alt="[NewMock action]" /><br /><br /></p>

<p><img src="/assets/images/20210131/NewMockResponse.png" alt="[NewMock response]" /><br /><br /></p>

<p>You can define the HTTP status code and the response body for the mock endpoint in the editor. The MockService responses allow you to define sequences of responses so (for the first response define a response message and for all subsequent responses define a very different response). Double-click the mock action to find and change the Dispatch options. The default is Sequence, meaning that all the responses are returned in order and the last response is repeated until the service is stopped or started.</p>

<p><img src="/assets/images/20210131/MockActionSequence.png" alt="[MockAction sequence]" /><br /><br /></p>

<p>When a MockService is started you can still edit the responses and status codes while it’s running. SoapUI will return the newly changed response without restarting the MockService first.</p>

<p>Be aware that when consuming the MockService from a local browser that you may have to add extra CORS endpoints to ensure the browser’s security to make the requests. See <a href="https://medium.com/@andrelimamail/how-to-deal-with-cors-in-soap-ui-mock-services-or-anyother-f4cc55b3dccd">this Medium article on how to handle CORS from a MockService</a>.</p>

        </div>
    </article>
    
    <article>
        <header class="article-header">
            <a href="/2020/06/29/Using-Postman-for-quick-and-repeatable-API-tests.html">Using Postman for quick and repeatable API tests</a>
        </header>
        
        <span>Jun 29, 2020</span> <br />
        Tags: 
        WebAPI
        
        <div class="article-content">
            <p>Postman is an API tool that is great for setting up repeatable calls to a REST web service in a short amount of time. When developing an API it’s a good way to check if the API works as expected and saves time in setting up calls every time. Using environment parameters you can also quickly replay the requests on different environments with different parameters. The export functions allow you to store collections and environment files in source control as needed. Using a low-code tool also has the benefit of sharing the calls and files with non-technical testers.</p>

<p>The tool has support for mock API and automated testing but these features require an account and the use of a paid license. When I need those features I usually switch to SoapUI another API testing tool that provides those features for free with no account needed. I will write an article on SoapUI at a later time. SoapUI also provides support for WCF services while Postman focusses on REST calls.</p>

<p>Due to ease of use and sharing Postman does have my preference over SoapUI until I find I need WCF calls, local mock services, or automated test cases.</p>

<p>More information on <a href="https://www.postman.com/">Postman features</a> and pricing see the Postman site. You can also download the tool from that website and install it. On the first startup, it will show a dialog prompting to sign in but there is a small skip sign-in link in the pop-up if you do not wish to set up yet another account for a new service.</p>

<p><strong>Table of contents:</strong></p>

<ul id="markdown-toc">
  <li><a href="#creating-and-sharing-collections" id="markdown-toc-creating-and-sharing-collections">Creating and sharing collections</a></li>
  <li><a href="#using-environments-and-parameters" id="markdown-toc-using-environments-and-parameters">Using environments and parameters</a></li>
  <li><a href="#using-a-pre-request-script-to-fetch-a-bearer-token-for-authorization-use-cases" id="markdown-toc-using-a-pre-request-script-to-fetch-a-bearer-token-for-authorization-use-cases">Using a pre-request script to fetch a bearer token for authorization use cases</a></li>
  <li><a href="#postman-console" id="markdown-toc-postman-console">Postman console</a></li>
  <li><a href="#exporting-postman-requests-as-code" id="markdown-toc-exporting-postman-requests-as-code">Exporting postman requests as code</a></li>
  <li><a href="#tip-for-seeing-and-replaying-a-browser-request" id="markdown-toc-tip-for-seeing-and-replaying-a-browser-request">Tip for seeing and replaying a browser request</a></li>
</ul>

<p><br /><br /></p>

<h3 id="creating-and-sharing-collections">Creating and sharing collections</h3>

<p>When opening Postman, go to the collections tab and create a new collection. This will create a folder to group requests. It will also allow you to set up certain shared settings like authorization, pre-requests scripts, tests, and variables as can be seen in de screenshot below.</p>

<p><img src="/assets/images/20200629/CreateCollection.png" alt="[Create collection]" /><br /><br /></p>

<p>I have added <a href="https://github.com/SamanthaNeilen/WebApiExamples/blob/api_test_tools/NetCore.WebApiExample/Controllers/ValuesController.cs">a simple values controller to my WebApi examples project</a> as shown below.</p>

<pre><code class="language-C#">
using Microsoft.AspNetCore.Mvc;
using System.Collections.Generic;

namespace NetCore.WebApiExample.Controllers
{
    [Route("api/[controller]")]
    [ApiController]
    public class ValuesController : ControllerBase
    {
        [HttpGet]
        public IActionResult Get()
        {
            return Ok(new [] {"value1", "value2"});
        }

        [HttpGet("{id}")]
        public IActionResult Get(int id)
        {
            return Ok($"Requested id: {id}");
        }

        [HttpPost]
        public IActionResult PostObjectParameter([FromBody] KeyValuePair&lt;int,string&gt; keyValuePair)
        {
            return Ok($"Posted values {keyValuePair}");
        }
        
        [HttpPost("{id}")]
        public IActionResult PostValueTypeParameter([FromRoute]int id, [FromBody] KeyValuePair&lt;string,string&gt; value)
        {
            return Ok($"Posted values {{ id: {id}, value: {value} }}");
        }
    }
}

</code></pre>
<p><br /><br /></p>

<p>A screenshot listing the requests within postman and the post for the api/values/{id} endpoint is shown below.</p>

<p><img src="/assets/images/20200629/CollectionOverview.png" alt="[Collection requests and POST example]" /><br /><br /></p>

<p>For requests using a JSON body be sure to add a Content-Type: application/json header to the request to ensure proper interpretation of the body content.<br /><br /></p>

<p><img src="/assets/images/20200629/RequestHeaders.png" alt="[Request headers]" /><br /><br /></p>

<p>Postman will add this header automatically when selecting the JSON content-type from the drop-down when using a raw body.<br /><br /></p>

<p><img src="/assets/images/20200629/BodyContentType.png" alt="[Body content type dropdown]" /> <br /><br /></p>

<p>When calling an endpoint protected by authentication/authorization you can either add an Authorization header to the headers tab or use the Authorization tab to fill the header using parameters related to the Authorization method:</p>

<p><img src="/assets/images/20200629/AuthorizationList.png" alt="[Authorization tab dropdown]" /> <br /><br /></p>

<p>When you have to wish to save the collection for sharing click the collection context menu and choose export. This will export a JSON file containing all the data. Be aware that if you set secrets in the requests that these will be embedded into the collection file.</p>

<p>The collection export file can be imported using the Import function in the top menu of Postman and saved to source control or any collaboration workspace.</p>

<p>I have marked both options with a red square in the screenshot below:</p>

<p><img src="/assets/images/20200629/ImportAndExportCollection.png" alt="[Import and export collection]" /> <br /><br /></p>

<p>I have added my <a href="https://github.com/SamanthaNeilen/WebApiExamples/blob/api_test_tools/Test%20files/NetCore%20WebApi%20Examples.postman_collection(no_parameters).json">exported postman collection file to my WebApi examples GitHub repository</a> and you can try importing and running the collection on a localhost instance of that project.</p>

<p><br /><br /></p>

<h3 id="using-environments-and-parameters">Using environments and parameters</h3>

<p>Postman allows the use of parameters and uses environments to easily switch out the parameter value. You can create a file for a local and hosted environment containing the host URL as a parameter.</p>

<p>To do this first create environments using the “Manage environment” option as shown below.</p>

<p><img src="/assets/images/20200629/ManageEnvironment.png" alt="[Manage environment]" /> <br /><br /></p>

<p><img src="/assets/images/20200629/CreateEnvironment.png" alt="[Create environment]" /> <br /><br /></p>

<p>Next change the host URL in the request to use a parameter placeholder so Postman knows where to replace the variable. Be sure to set the active environment to ensure the parameter is bound to the correct value. The variables can be embedded in the URL or any of the request parameter tabs (authorization, headers, body) as shown in the screenshots below.</p>

<p><img src="/assets/images/20200629/ParameterizedRequest.png" alt="[Parameterized request]" /><br /><br /></p>

<p>Environments can also be exported using the download option in the Manage environment pop-up.</p>

<p><img src="/assets/images/20200629/DownloadEnvironment.png" alt="[Download environment]" /><br /><br /></p>

<p>The import function in the top left side of Postman can be used for either importing environment or collection files.</p>

<p>I have added <a href="https://github.com/SamanthaNeilen/WebApiExamples/blob/api_test_tools/Test%20files/Local%20NetCore%20WebApiExamples.postman_environment.json">my exported parameterized postman collection file</a> and <a href="https://github.com/SamanthaNeilen/WebApiExamples/blob/api_test_tools/Test%20files/Local%20NetCore%20WebApiExamples.postman_environment.json">local environment file</a> to my WebApi examples GitHub repository and you can try importing and running the collection on a localhost instance of that project.</p>

<p><br /><br /></p>

<h3 id="using-a-pre-request-script-to-fetch-a-bearer-token-for-authorization-use-cases">Using a pre-request script to fetch a bearer token for authorization use cases</h3>

<p>When using OAUTH2 authorization, you can use the pre-requests script on a collection to call a script to fill a variable with a valid token. This will ensure you can always just run the request and not have to worry about retrieving a valid authorization token every time.</p>

<p><a href="https://gist.github.com/bcnzer/073f0fc0b959928b0ca2b173230c0669">A basic script by Ben Chartrand can be found on Github.</a></p>

<p>Be aware that when exporting environment files or postman collections that hard-coded settings and secrets will be exported in the files. In the uploaded files I have created placeholders for the secrets and specific instance settings that correspond with the placeholders in the WebApi configuration files.</p>

<p>The pre-request script for a collection can be found using the Edit collection context menu setting and then selecting the pre-request script tab.</p>

<p><img src="/assets/images/20200629/EditCollectionPreRequestScript.png" alt="[Edit collection option and pre-request script tab]" /><br /><br /></p>

<h3 id="postman-console">Postman console</h3>

<p>Postman console is a useful feature for troubleshooting and sharing raw requests made by Postman and can be found in the bottom left of the application.</p>

<p><img src="/assets/images/20200629/PostmanConsole.png" alt="[Postman console option]" /> <br /><br /></p>

<p>You can inspect the requests made and via the “show raw log” option can change the format to the actual HTTP call that has been sent. The raw format is great for sharing tool independent requests/responses to for example an API vendor for troubleshooting. (Again be aware of any secrets embedded in your requests/responses when sharing this information)</p>

<p><br /><br /></p>

<h3 id="exporting-postman-requests-as-code">Exporting postman requests as code</h3>

<p>Besides sharing the raw requests logged in Postman console you can also share requests by exporting a request as code using the code option below the Save button on a request.</p>

<p><img src="/assets/images/20200629/GenerateCode.png" alt="[Generate code option]" /><br /><br /></p>

<h3 id="tip-for-seeing-and-replaying-a-browser-request">Tip for seeing and replaying a browser request</h3>

<p>If you have a web application in a browser that calls an API you can usually use the network tab of the developer tools to inspect requests made from the browser to your API. <br /><br /></p>

<p><img src="/assets/images/20200629/BrowserNetworkTabRequestDetails.png" alt="[Browser - network tab - request details]" /><br /><br /></p>

<p>By copying the headers and body for the request to a postman request you can easily replay, edit, and troubleshoot a request without constantly having to fill-out webforms.</p>

        </div>
    </article>
    
    <article>
        <header class="article-header">
            <a href="/2020/05/04/Calling-async-methods-with-configureawait.html">Calling async methods with ConfigureAwait</a>
        </header>
        
        <span>May 4, 2020</span> <br />
        Tags: 
        Async
        
        <div class="article-content">
            <p>When I started using SonarQube/SonarLint to improve code quality it made me aware of using the ConfigureAwait method available on any async method call. The linting rule defines:</p>

<blockquote>
  <p>After an <code class="highlighter-rouge">await</code>ed <code class="highlighter-rouge">Task</code> has executed, you can continue execution in the original, calling thread or any arbitrary thread. Unless the rest of the code needs the context from which the <code class="highlighter-rouge">Task</code> was spawned, <code class="highlighter-rouge">Task.ConfigureAwait(false)</code> should be used to keep execution in the <code class="highlighter-rouge">Task</code> thread to avoid the need for context switching and the possibility of deadlocks.</p>

  <p>This rule raises an issue when code in a class library <code class="highlighter-rouge">await</code>s a <code class="highlighter-rouge">Task</code> and continues execution in the original calling thread.</p>

  <p><a href="https://rules.sonarsource.com/csharp/RSPEC-3216">quoted from: sonarsource.com</a></p>
</blockquote>

<p>In this post, I will take little dive into asynchronous programming and refer to relevant resources to look at. After that, I will explain the usage of the ConfigureAwait method.</p>

<p><strong>Table of contents:</strong></p>
<ul id="markdown-toc">
  <li><a href="#what-is-asynchronous-programming" id="markdown-toc-what-is-asynchronous-programming">What is asynchronous programming</a></li>
  <li><a href="#the-task-based-asynchronous-pattern-tap" id="markdown-toc-the-task-based-asynchronous-pattern-tap">The Task-based Asynchronous Pattern (TAP)</a></li>
  <li><a href="#using-configureawait" id="markdown-toc-using-configureawait">Using ConfigureAwait</a></li>
</ul>

<h3 id="what-is-asynchronous-programming">What is asynchronous programming</h3>

<p>If you are not very familiar with asynchronous programming I would advise you to look into the high-level explanations found in the Microsoft Docs articles below.</p>

<ul>
  <li><a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/async/">Asynchronous programming with async and await</a></li>
  <li><a href="https://docs.microsoft.com/en-us/dotnet/standard/async-in-depth">Async in depth</a></li>
</ul>

<p>My summary for these articles is:</p>

<p>A single method call chain in your program when called synchronously is executed on 1 thread. If the code has to wait for an external call handled by the operating system (accessing a disk or network resource) that single thread will stay idle and wait for that external call to finish then resume its work.</p>

<p>When using asynchronous programming you allow the call chain execution to be paused and free up the thread for other work while waiting for the response of an external or long-running call. This allows the software or system that runs the software to complete more work and utilize it’s resources more efficiently.</p>

<p>Another great article on Microsoft Docs is “https://docs.microsoft.com/en-us/dotnet/csharp/async” that explains how to identify situations in which asynchronous programming is especially helpful. Also, be aware of the <a href="https://docs.microsoft.com/en-us/dotnet/csharp/async#important-info-and-advice">“Important info and advice</a>” section in that article for some extra tips even if you already know and use asynchronous programming.</p>

<h3 id="the-task-based-asynchronous-pattern-tap">The Task-based Asynchronous Pattern (TAP)</h3>

<p>.NET Framework 4 and above (including .NET Core) use the Task-based Asynchronous Pattern (TAP) for writing asynchronous code. There <a href="https://docs.microsoft.com/en-us/dotnet/standard/asynchronous-programming-patterns/task-based-asynchronous-pattern-tap">are in-depth and concrete articles for Task-based asynchronous pattern (TAP)</a> on how to use the Task-based Asynchronous Pattern in C#. You can also find explanations on the “Legacy” asynchronous patterns used in the .NET framework using the left-hand content menu.</p>

<p>The “<a href="https://docs.microsoft.com/en-us/dotnet/standard/asynchronous-programming-patterns/consuming-the-task-based-asynchronous-pattern">Consuming the Task-based Asynchronous Pattern</a>” contains an explanation on how to consume asynchronous methods. This information is good to know as more and more methods of the .NET framework are starting to become asynchronous methods. This article also contains <a href="https://docs.microsoft.com/en-us/dotnet/standard/asynchronous-programming-patterns/consuming-the-task-based-asynchronous-pattern#configuring-suspension-and-resumption-with-yield-and-configureawait">an explanation for the ConfigureAwait method</a>.</p>

<h3 id="using-configureawait">Using ConfigureAwait</h3>

<p>As stated in the last paragraph the section in “<a href="https://docs.microsoft.com/en-us/dotnet/standard/asynchronous-programming-patterns/consuming-the-task-based-asynchronous-pattern">Consuming the Task-based Asynchronous Pattern</a>” explaining the ConfigureAwait is “<a href="https://docs.microsoft.com/en-us/dotnet/standard/asynchronous-programming-patterns/consuming-the-task-based-asynchronous-pattern#configuring-suspension-and-resumption-with-yield-and-configureawait">Configuring Suspension and Resumption with Yield and ConfigureAwait</a>”.</p>

<p>It explains that when resuming work after an await, the default behavior is to resume work on the original thread that was paused. If you do not explicitly use the ConfigureAwait method the default behavior will be the same as ConfigureAwait(true).</p>

<p>When using asynchronous methods in a web application this default behavior allows you to retain the value certain variables like for example the HttpContext variable after an awaited method.</p>

<p>If you have no need for these values (or capture all the values on entry and hand them off to your asynchronous code) you can use ConfigureAwait(false). This will allow the continuation of execution on any thread and allows the system to improve its scheduling of work on the available threads. As stated in the SonarQube rule listed at the start of the article this may also prevent certain deadlock scenarios.</p>

<p>However, be aware that when introducing ConfigureAwait(false) that you may lose some context variables and get some unexplainable null reference exceptions if the code is expecting those variables to still have a value.</p>

<p>There is a great <a href="https://devblogs.microsoft.com/dotnet/configureawait-faq/">Microsoft developer blogpost</a> with extra useful information and a FAQ section about the usage of ConfigureAwait. It has a more in-depth explanation of how to use ConfigureAwait.</p>

        </div>
    </article>
    
    <article>
        <header class="article-header">
            <a href="/2020/03/18/Tips-for-building-habits-around-working-from-home.html">Tips for building habits around working from home</a>
        </header>
        
        <span>Mar 18, 2020</span> <br />
        Tags: 
        <div class="article-content">
            <p>What helps me stay focused when working from home is keeping the same schedule (and thus my habits around that schedule) and building the mental model of “working time” and “home time”. Just a disclaimer: I don’t have kids or pets that don’t understand and will probably disrupt these habits and mental models.</p>

<p>For me this means:</p>

<ul>
  <li>Waking up at 5-6 am to get an hour of study before I would regularly leave for work.</li>
  <li>Instead of leaving for work simulate my commute by exercising for half an hour. Preferably a walk outside</li>
  <li>Have a fixed working space in the house to get in the mindset that being there is being “at work”</li>
  <li>Start working at your regular staring time</li>
  <li>Keep the same eating, drinking and break habits you would have in the office (for my this is regulating my caffeine and not over caffeinating, have just my regular sandwich and apple for lunch at my desk followed by a half-hour exercise moment)</li>
  <li>Don’t overeat or crash on the couch in front of the television during lunch to keep fit and motivated for the afternoon.</li>
  <li>Try not to do any chores during “work hours” to keep that in-office mindset</li>
  <li>Stop working at the same time you regularly leave for home (working long hours will probably make you less effective and burn you out in the long run)</li>
  <li>Go to bed a the same time as you would on a regular working day</li>
</ul>

<p>Some recent podcasts about the same subject for more tips and stories</p>

<ul>
  <li><a href="https://spec.fm/podcasts/developer-tea/317916">Developer tea - Hidden Environment Inputs - Mindful Remote Work</a>  (be sure to check out the other episodes for this podcast. It’s a treasure trove on episodes about habit building and mindfulness in your work)</li>
  <li><a href="https://hanselminutes.com/723/surviving-as-a-remote-tech-employee-with-jayson">Hanselminutes - Surviving as a remote tech employee with Jayson J. Phillips</a></li>
  <li><a href="https://ladybug.dev/working-remotely">Ladybug podcast – working remotely</a></li>
</ul>


        </div>
    </article>
    
    <article>
        <header class="article-header">
            <a href="/2020/02/08/Unit-testing-self-executing-JavaScript-Modules-in-Visual-Studio.html">Unit testing self-executing JavaScript modules in Visual Studio</a>
        </header>
        
        <span>Feb 8, 2020</span> <br />
        Tags: 
        JavaScript
        
        TestAutomation
        
        <div class="article-content">
            <p>Visual Studio has support for unit tests in the Test Explorer window so you can run all your C# and JavaScript tests from that editor. A separate Node project can contain al the test code separate from the code that gets published and deployed. It is possible to include the tests in the web project itself. See <a href="https://docs.microsoft.com/en-us/visualstudio/javascript/unit-testing-javascript-with-visual-studio?view=vs-2019#unit-tests-in-other-project-types">the Microsoft Docs page on Unit testing JavaScript and TypeScript in Visual Studio</a> for more details.</p>

<p>This post is a continuation of my post about <a href="https://samanthaneilen.github.io/2019/12/30/Creating-more-maintainable-javascript-with-self-executing-functions.html">Creating more maintainable JavaScript with self-executing functions</a>. I will continue building on the JavaScriptModules project presented in that post. A working Visual Studio project with the code can be found in my <a href="https://github.com/SamanthaNeilen/JavascriptModulesExamples">JavaScriptModuleExamples repository on GitHub</a>.
 If you use the project from GitHub be sure to follow to ReadMe.md on the repository for additional steps to see the tests in Visual Studio Test Explorer.</p>

<p>The befits of writing these JavaScript unit tests are getting earlier feedback about the state of your JavaScript without writing more fragile and slower integration tests. The unit tests can also be run in the build pipeline next to your regular unit tests using an npm test command step before deploying to an environment.</p>

<p><strong>Table of contents:</strong></p>
<ul id="markdown-toc">
  <li><a href="#setup-a-nodejs-test-project" id="markdown-toc-setup-a-nodejs-test-project">Setup a Node.Js Test project</a></li>
  <li><a href="#writing-tests" id="markdown-toc-writing-tests">Writing tests</a></li>
  <li><a href="#resources" id="markdown-toc-resources">Resources</a></li>
</ul>

<h3 id="setup-a-nodejs-test-project">Setup a Node.Js Test project</h3>

<p>So to start testing, add a Blank Node.js Console Application project. You need to have the Node.js workload installed in Visual Studio. When you add a new file to the project via the “Add -&gt; New Item” context menu, you can see the test frameworks that Visual Studio already provides a template file for. The template file contains a passing test and a failing test showing the syntax for basic tests.</p>

<p><img src="/assets/images/20200208/JavaScriptUnitTestFileTemplates.png" alt="[JavaScript unit test file templates]" /></p>

<p><a href="https://medium.com/welldone-software/an-overview-of-javascript-testing-in-2019-264e19514d0a">An article comparing several of the different JavaScript frameworks can be found on Medium.</a></p>

<p>I will be working with the Jest framework in this post, so add a Jest test file. The contents for the default new Jest file is shown below.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Test Suite 1'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s2">"Test 1 - This shouldn't fail"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">expect</span><span class="p">(</span><span class="kc">true</span><span class="p">).</span><span class="nx">toBeTruthy</span><span class="p">();</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="s1">'Test 2 - This should fail'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">expect</span><span class="p">(</span><span class="mi">1</span> <span class="o">===</span> <span class="mi">1</span><span class="p">).</span><span class="nx">toBeTruthy</span><span class="p">();</span> <span class="c1">// "This shouldn't fail"</span>
        <span class="nx">expect</span><span class="p">(</span><span class="kc">false</span><span class="p">).</span><span class="nx">toBeTruthy</span><span class="p">();</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p>To run the tests using Visual Studio Test you need to set the “JavaScript Unit Test” properties in the project properties and install the jest and jest-editor-support npm packages.</p>

<p>For the “JavaScript Unit Tests” properties set the “Test Framework” to the framework of choice (Jest, in my case) and set the Test Root to a “Tests” subfolder. Using a subfolder will ensure that you can add extra folders with builder and helper classes without them being seen as potential unit test files.</p>

<p>Now the tests will show up in Test Explorer after building the project. You may have to restart Visual Studio the first time before any tests show up. Also to ensure running or debugging the latest version of your tests you always need to build before running a test via Test Explorer.</p>

<p><img src="/assets/images/20200208/FirstTestsLoadedInTestExplorer.png" alt="[First tests loaded in Test Explorer]" /></p>

<h3 id="writing-tests">Writing tests</h3>

<p>To start testing the customer-overview.js file from the JavaScriptModules web project we first have to hookup some dependencies and mocks. We need jQuery, a mock of our customer-service.js and the HTML or DOM setup that the module can interact with.</p>

<p>First, add a testutilities.js file that will set up a module that has the link to the wwwroot of our project under test and loads in 3rd party libraries needed for testing. The module is shown below.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">currentModule</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="kd">let</span> <span class="nx">wwwRootScriptsFolder</span> <span class="o">=</span> <span class="s1">'../JavaScriptModules/wwwroot/'</span><span class="p">;</span>

    <span class="nx">currentModule</span><span class="p">.</span><span class="nx">wwwRoot</span> <span class="o">=</span> <span class="nx">wwwRootScriptsFolder</span><span class="p">;</span>

    <span class="nx">currentModule</span><span class="p">.</span><span class="nx">initialize</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nb">global</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">$</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="nx">wwwRootScriptsFolder</span> <span class="o">+</span> <span class="s1">'lib/jquery/jquery.js'</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nb">global</span><span class="p">.</span><span class="nx">TestUtilitiesModule</span> <span class="o">=</span> <span class="nx">currentModule</span><span class="p">;</span>
<span class="p">})();</span>
</code></pre></div></div>

<p>Now we can use the TestUtilities module in the test file to do a simple test using jQuery. This example also shows how to declare some HTML to interact with. The document is actually a mock provided by the test framework. Any interactions your code and modules have with the window or document will work as expected.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Test Suite 1'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">jest</span><span class="p">.</span><span class="nx">resetModules</span><span class="p">();</span>
        <span class="nx">require</span><span class="p">(</span><span class="s1">'../TestUtilities.js'</span><span class="p">);</span>
        <span class="nb">global</span><span class="p">.</span><span class="nx">TestUtilitiesModule</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>

        <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">input</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'label'</span><span class="p">);</span>
        <span class="nx">input</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s1">'myLabel'</span><span class="p">;</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="s2">"Test 1 - This shouldn't fail"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'#myLabel'</span><span class="p">)).</span><span class="nx">toHaveLength</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="s1">'Test 2 - This should fail'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">expect</span><span class="p">(</span><span class="mi">1</span> <span class="o">===</span> <span class="mi">1</span><span class="p">).</span><span class="nx">toBeTruthy</span><span class="p">();</span> <span class="c1">// "This shouldn't fail"</span>
        <span class="nx">expect</span><span class="p">(</span><span class="kc">false</span><span class="p">).</span><span class="nx">toBeTruthy</span><span class="p">();</span>
    <span class="p">});</span>
<span class="p">});</span>

</code></pre></div></div>
<p>If you run the test in debugging mode, you can stop and inspect the variables and DOM.</p>

<p><img src="/assets/images/20200208/DebugTest.png" alt="[Debugging JavaScript test]" /></p>

<p>Now, we want to build the HTML template for the initial page for the module under test. I usually create a module using <a href="https://en.wikipedia.org/wiki/Builder_pattern">the builder pattern</a> to be able to create the template in a fluent syntax. This way you can use the builder in your tests to create multiple starting HTML situations with expressive and readable syntax. The builder and the test file using the builder are shown below. Not that in the builder below I only add the required elements to check my logic. All elements that are for layout and not functionality are omitted. (The code below can be also be found in my GitHub repo under the tag: V1.3-first-test-module-using-HTML-builder <a href="https://github.com/SamanthaNeilen/JavascriptModulesExamples/tree/V1.3-first-test-module-using-HTML-builder">my GitHub repo under the tag: V1.3-first-test-module-using-HTML-builder</a>.)</p>

<p>(Also note that the code shown is a refinement of multiple times writing, evaluating, refactoring and running and reading the tests iterations. If your logic and HTML are simple you may not even these builders to write a few simple tests.)</p>

<p>UnitTest.js:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Search using Name'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">testProjectRoot</span> <span class="o">=</span> <span class="s1">'../../../'</span><span class="p">;</span>
        <span class="nx">jest</span><span class="p">.</span><span class="nx">resetModules</span><span class="p">();</span>

        <span class="nx">require</span><span class="p">(</span><span class="nx">testProjectRoot</span> <span class="o">+</span> <span class="s1">'TestUtilities.js'</span><span class="p">);</span>
        <span class="nb">global</span><span class="p">.</span><span class="nx">TestUtilitiesModule</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="nx">require</span><span class="p">(</span><span class="nx">testProjectRoot</span> <span class="o">+</span> <span class="s1">'Builders/CustomerOverviewHtmlBuilder.js'</span><span class="p">);</span>

        <span class="kd">let</span> <span class="nx">wwwRoot</span> <span class="o">=</span> <span class="nx">testProjectRoot</span> <span class="o">+</span> <span class="nb">global</span><span class="p">.</span><span class="nx">TestUtilitiesModule</span><span class="p">.</span><span class="nx">wwwRoot</span><span class="p">;</span>
        <span class="nx">require</span><span class="p">(</span><span class="nx">wwwRoot</span> <span class="o">+</span> <span class="s1">'js/utilities.js'</span><span class="p">);</span>
        <span class="nx">require</span><span class="p">(</span><span class="nx">wwwRoot</span> <span class="o">+</span> <span class="s1">'js/customer-overview.js'</span><span class="p">);</span>

        <span class="c1">//arrange initial state</span>
        <span class="kd">let</span> <span class="nx">htmlTemplate</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">customerOverviewHtmlBuilderModule</span>
            <span class="p">.</span><span class="k">new</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">clearDataRows</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">hideLoadingRow</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">withDataRow</span><span class="p">(</span><span class="s1">'first customer'</span><span class="p">,</span> <span class="s1">'first customer email'</span><span class="p">,</span> <span class="s1">'first customer country'</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">withDataRow</span><span class="p">(</span><span class="s1">'second customer'</span><span class="p">,</span> <span class="s1">'second customer email'</span><span class="p">,</span> <span class="s1">'second customer country'</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">withDataRow</span><span class="p">(</span><span class="s1">'testcustomer'</span><span class="p">,</span> <span class="s1">'testcustomer email'</span><span class="p">,</span> <span class="s1">'testcustomer country'</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">build</span><span class="p">();</span>

        <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">htmlTemplate</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="s2">"WHEN 3 rows loaded THEN Search with full Name SHOULD filter to show one row"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">//arrange</span>
        <span class="kd">let</span> <span class="nx">searchNameValue</span> <span class="o">=</span> <span class="s1">'second customer'</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">initialVisibleRows</span> <span class="o">=</span> <span class="nx">getVisibleRows</span><span class="p">();</span>
        <span class="kd">let</span> <span class="nx">initialInvisibleRows</span> <span class="o">=</span> <span class="nx">getInvisibleRows</span><span class="p">();</span>

        <span class="c1">//act</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">"#searchCustomerName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">searchNameValue</span><span class="p">);</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">customerOverviewModule</span><span class="p">.</span><span class="nx">filterData</span><span class="p">();</span>

        <span class="c1">//assert intial state</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">initialVisibleRows</span><span class="p">).</span><span class="nx">toHaveLength</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">initialInvisibleRows</span><span class="p">).</span><span class="nx">toHaveLength</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

        <span class="c1">//assert state after action</span>
        <span class="kd">let</span> <span class="nx">filteredVisibleRows</span> <span class="o">=</span> <span class="nx">getVisibleRows</span><span class="p">();</span>
        <span class="kd">let</span> <span class="nx">filteredInvisibleRows</span> <span class="o">=</span> <span class="nx">getInvisibleRows</span><span class="p">();</span>
        
        <span class="nx">expect</span><span class="p">(</span><span class="nx">filteredVisibleRows</span><span class="p">).</span><span class="nx">toHaveLength</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">filteredInvisibleRows</span><span class="p">).</span><span class="nx">toHaveLength</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>

        <span class="kd">let</span> <span class="nx">actualVisibleRowSearchName</span> <span class="o">=</span> <span class="nx">getSearchNameValueForSingleRow</span><span class="p">(</span><span class="nx">filteredVisibleRows</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">actualVisibleRowSearchName</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">searchNameValue</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="kd">function</span> <span class="nx">getSearchNameValueForSingleRow</span><span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="nx">row</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'td'</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">getVisibleRows</span><span class="p">()</span> <span class="p">{</span>
        
        <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">getAllRows</span><span class="p">(),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="nx">$</span><span class="p">(</span><span class="nx">row</span><span class="p">).</span><span class="nx">hasClass</span><span class="p">(</span><span class="s1">'display-none'</span><span class="p">);</span> <span class="p">});</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">getInvisibleRows</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">getAllRows</span><span class="p">(),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="nx">row</span><span class="p">).</span><span class="nx">hasClass</span><span class="p">(</span><span class="s1">'display-none'</span><span class="p">);</span> <span class="p">});</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">getAllRows</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#customer-table-body'</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'tr'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>

</code></pre></div></div>

<p>TestUtilities.js:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">currentModule</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="kd">let</span> <span class="nx">wwwRootScriptsFolder</span> <span class="o">=</span> <span class="s1">'../JavaScriptModules/wwwroot/'</span><span class="p">;</span>

    <span class="nx">currentModule</span><span class="p">.</span><span class="nx">wwwRoot</span> <span class="o">=</span> <span class="nx">wwwRootScriptsFolder</span><span class="p">;</span>

    <span class="nx">currentModule</span><span class="p">.</span><span class="nx">initialize</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nb">global</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">$</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="nx">wwwRootScriptsFolder</span> <span class="o">+</span> <span class="s1">'lib/jquery/jquery.js'</span><span class="p">);</span>
        <span class="nx">require</span><span class="p">(</span><span class="s1">'./Builders/BaseHtmlBuilder.js'</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="nb">global</span><span class="p">.</span><span class="nx">TestUtilitiesModule</span> <span class="o">=</span> <span class="nx">currentModule</span><span class="p">;</span>
<span class="p">})();</span>
</code></pre></div></div>

<p>CustomerOverviewHtmlBuilder.js:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">baseHtmlBuilder</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">currentModule</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="kd">let</span> <span class="nx">root</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'div'</span><span class="p">);</span>

    <span class="nx">currentModule</span><span class="p">.</span><span class="k">new</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">root</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'div'</span><span class="p">);</span>

        <span class="kd">let</span> <span class="nx">searchForm</span> <span class="o">=</span> <span class="nx">createSearchForm</span><span class="p">();</span>
        <span class="nx">root</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">searchForm</span><span class="p">);</span>

        <span class="kd">let</span> <span class="nx">dataGrid</span> <span class="o">=</span> <span class="nx">createEmptyGrid</span><span class="p">();</span>
        <span class="nx">root</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">dataGrid</span><span class="p">);</span>

        <span class="kd">let</span> <span class="nx">rowTemplates</span> <span class="o">=</span> <span class="nx">createRowTemplates</span><span class="p">();</span>
        <span class="nx">root</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">rowTemplates</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">currentModule</span><span class="p">;</span>
    <span class="p">};</span>


    <span class="nx">currentModule</span><span class="p">.</span><span class="nx">clearDataRows</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">customerTable</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">root</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#customer-table-body'</span><span class="p">);</span>
        <span class="kd">let</span> <span class="nx">loadingRow</span> <span class="o">=</span> <span class="nx">customerTable</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'.loading-row'</span><span class="p">);</span>
        <span class="nx">customerTable</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
        <span class="nx">customerTable</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">loadingRow</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">currentModule</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="nx">currentModule</span><span class="p">.</span><span class="nx">hideLoadingRow</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">customerTable</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">root</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#customer-table-body'</span><span class="p">);</span>
        <span class="kd">let</span> <span class="nx">loadingRow</span> <span class="o">=</span> <span class="nx">customerTable</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'.loading-row'</span><span class="p">);</span>
        <span class="nx">loadingRow</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">'display-none'</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">currentModule</span><span class="p">;</span>
    <span class="p">};</span>
    
    <span class="nx">currentModule</span><span class="p">.</span><span class="nx">withDataRow</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">country</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">customerTable</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">root</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#customer-table-body'</span><span class="p">);</span>
        <span class="kd">let</span> <span class="nx">row</span> <span class="o">=</span> <span class="nx">baseHtmlBuilder</span><span class="p">.</span><span class="nx">createRow</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="na">Id</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span>
                <span class="na">className</span><span class="p">:</span> <span class="s1">'customer-row'</span><span class="p">,</span>
                <span class="na">cells</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span> <span class="na">innerHTML</span><span class="p">:</span> <span class="nx">name</span> <span class="p">},</span>
                    <span class="p">{</span> <span class="na">innerHTML</span><span class="p">:</span> <span class="nx">email</span> <span class="p">},</span>
                    <span class="p">{</span> <span class="na">innerHTML</span><span class="p">:</span> <span class="nx">country</span> <span class="p">}]</span>
            <span class="p">}</span>
        <span class="p">);</span>
        <span class="nx">customerTable</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">row</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">currentModule</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="nx">currentModule</span><span class="p">.</span><span class="nx">build</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">root</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">createSearchForm</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">searchform</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'div'</span><span class="p">);</span>
        <span class="nx">searchform</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s1">'search-customer'</span><span class="p">;</span>

        <span class="nx">searchform</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">baseHtmlBuilder</span><span class="p">.</span><span class="nx">createTextInput</span><span class="p">(</span><span class="s1">'searchCustomerName'</span><span class="p">));</span>
        <span class="nx">searchform</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">baseHtmlBuilder</span><span class="p">.</span><span class="nx">createTextInput</span><span class="p">(</span><span class="s1">'searchEmail'</span><span class="p">));</span>
        <span class="nx">searchform</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">baseHtmlBuilder</span><span class="p">.</span><span class="nx">createTextInput</span><span class="p">(</span><span class="s1">'searchCountry'</span><span class="p">));</span>
        <span class="nx">searchform</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">baseHtmlBuilder</span><span class="p">.</span><span class="nx">createButton</span><span class="p">(</span><span class="s1">'customerOverviewSearchButton'</span><span class="p">));</span>

        <span class="k">return</span> <span class="nx">searchform</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">createEmptyGrid</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">table</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'table'</span><span class="p">);</span>

        <span class="kd">let</span> <span class="nx">tableBody</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'tbody'</span><span class="p">);</span>
        <span class="nx">tableBody</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s1">'customer-table-body'</span><span class="p">;</span>
        <span class="nx">table</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">tableBody</span><span class="p">);</span>

        <span class="kd">let</span> <span class="nx">row</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'tr'</span><span class="p">);</span>
        <span class="nx">row</span><span class="p">.</span><span class="nx">className</span>  <span class="o">=</span> <span class="s1">'loading-row'</span><span class="p">;</span>
        <span class="nx">tableBody</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">row</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">table</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">createRowTemplates</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">table</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'table'</span><span class="p">);</span>
        <span class="nx">table</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">'display-none'</span><span class="p">;</span>

        <span class="kd">let</span> <span class="nx">row</span> <span class="o">=</span> <span class="nx">baseHtmlBuilder</span><span class="p">.</span><span class="nx">createRow</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="na">id</span><span class="p">:</span> <span class="s1">'data-row-template'</span><span class="p">,</span>
                <span class="na">className</span><span class="p">:</span> <span class="s1">'customer-row'</span><span class="p">,</span>
                <span class="na">cells</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span> <span class="na">innerHTML</span><span class="p">:</span> <span class="s1">''</span> <span class="p">},</span>
                    <span class="p">{</span> <span class="na">innerHTML</span><span class="p">:</span> <span class="s1">''</span> <span class="p">},</span>
                    <span class="p">{</span> <span class="na">innerHTML</span><span class="p">:</span> <span class="s1">''</span> <span class="p">}]</span>
            <span class="p">}</span>
        <span class="p">);</span>
        <span class="nx">table</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">row</span><span class="p">);</span>
        
        <span class="k">return</span> <span class="nx">table</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nb">global</span><span class="p">.</span><span class="nx">customerOverviewHtmlBuilderModule</span> <span class="o">=</span> <span class="nx">currentModule</span><span class="p">;</span>
<span class="p">})(</span><span class="nx">jQuery</span><span class="p">,</span> <span class="nb">global</span><span class="p">.</span><span class="nx">BaseHtmlBuilderModule</span><span class="p">);</span>
</code></pre></div></div>
<p>BaseHtmlBuilder.js:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">currentModule</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">currentModule</span><span class="p">.</span><span class="nx">createTextInput</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">input</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'input'</span><span class="p">);</span>
        <span class="nx">input</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">id</span><span class="p">;</span>
        <span class="nx">input</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">'text'</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">input</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="nx">currentModule</span><span class="p">.</span><span class="nx">createButton</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">button</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'button'</span><span class="p">);</span>
        <span class="nx">button</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">id</span><span class="p">;</span>
        <span class="nx">button</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">'button'</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">button</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="nx">currentModule</span><span class="p">.</span><span class="nx">createRow</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">rowDefinition</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">rowElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'tr'</span><span class="p">);</span>
        <span class="nx">rowElement</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">rowDefinition</span><span class="p">.</span><span class="nx">Id</span><span class="p">;</span>
        <span class="nx">rowElement</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">rowDefinition</span><span class="p">.</span><span class="nx">className</span><span class="p">;</span>

        <span class="kd">let</span> <span class="nx">cells</span> <span class="o">=</span> <span class="nx">currentModule</span><span class="p">.</span><span class="nx">createCells</span><span class="p">(</span><span class="nx">rowDefinition</span><span class="p">.</span><span class="nx">cells</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">cells</span><span class="p">,</span>
            <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">cell</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">rowElement</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">cell</span><span class="p">);</span>
            <span class="p">});</span>

        <span class="k">return</span> <span class="nx">rowElement</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="nx">currentModule</span><span class="p">.</span><span class="nx">createCells</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">cells</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">resultingCells</span> <span class="o">=</span> <span class="p">[];</span>

        <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">cells</span><span class="p">,</span>
            <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">cell</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">cellElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'td'</span><span class="p">);</span>
                <span class="nx">cellElement</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">className</span><span class="p">;</span>
                <span class="nx">cellElement</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">;</span>
                <span class="nx">resultingCells</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">cellElement</span><span class="p">);</span>
            <span class="p">});</span>

        <span class="k">return</span> <span class="nx">resultingCells</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="nb">global</span><span class="p">.</span><span class="nx">BaseHtmlBuilderModule</span> <span class="o">=</span> <span class="nx">currentModule</span><span class="p">;</span>
<span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>
</code></pre></div></div>
<p>When you see this code it might seem like a lot of work to create a few tests. By extracting helper methods to a separate class you will have to invest a bit more initially but will be faster at writing tests later. Also by practicing TDD, you should be able to create the template as you are building your HTML and initial JavaScript methods so the extra invested time should not come all at once after completing your complete HTML and JavaScript logic.</p>

<p>A debugging/troubleshooting tip for your HTML builders. If you’re unsure that the code to create the HTML is correct. At a watch to the document.body.innerHTML variable and paste the value in a new HTML page file in Visual Studio. Select all contents in the file and right-click to get the context menu and select Un-Minify to get a nice readable HTML with syntax highlighting to troubleshoot the output of the builder.</p>

<p><img src="/assets/images/20200208/DocumentHtmlUnMinify.png" alt="[Un-Minify option for HTML]" /></p>

<p>Jest supports a way to use tests with parameters but the Visual Studio integration does not pick them up. So for now, I just add multiple tests for the different parameters I would like to test. To avoid having to change all the tests when my arrangements or assertions have to change, I introduce ScenarioBuilder and/or AssertionHelper modules that again abstract the test scenarios and assertions in a nice readable fluent syntax.</p>

<p>In the example, I added a scenario builder module in the file itself containing a full set of arrange, act and assert methods. If the module gets to large or you see duplication across several builders you could choose to create builders with better separation of concerns. The point is to show an example of a pattern for writing readable tests where the implementation details can be changed in a single spot in the code should the page or functionality change. For the full working solution see <a href="https://github.com/SamanthaNeilen/JavascriptModulesExamples/tree/V1.4-first-test-using-scenario-builder">my GitHub repo with the tag: V1.4-first-test-using-scenario-builder</a>.)</p>

<p>UnitTest.js</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Search using Name'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

    <span class="nx">it</span><span class="p">(</span><span class="s2">"WHEN 3 rows loaded THEN Search with full Name SHOULD filter to show one row"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">scenario</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">SearchCustomerNameScenarioBuilderModule</span><span class="p">.</span><span class="k">new</span><span class="p">();</span>

        <span class="c1">//arrange</span>
        <span class="kd">const</span> <span class="nx">valueToSearch</span> <span class="o">=</span> <span class="s1">'second customer'</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">expectedNumberOfVisibleRows</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">expectedNumberOfInvisibleRows</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
        
        <span class="nx">scenario</span><span class="p">.</span><span class="nx">arrange_Page_With_3_Initial_DataRows</span><span class="p">();</span>

        <span class="c1">//act</span>
        <span class="nx">scenario</span><span class="p">.</span><span class="nx">act_SearchName</span><span class="p">(</span><span class="nx">valueToSearch</span><span class="p">);</span>

        <span class="c1">//assert</span>
        <span class="nx">scenario</span><span class="p">.</span><span class="nx">assert_Number_Of_Visible_Rows</span><span class="p">(</span><span class="nx">expectedNumberOfVisibleRows</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">assert_Number_Of_Invisible_Rows</span><span class="p">(</span><span class="nx">expectedNumberOfInvisibleRows</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">assert_Visible_Rows_Name_Is_Complete_SearchValue</span><span class="p">(</span><span class="nx">valueToSearch</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">assert_Invisible_Rows_Name_Do_Not_Contain_SearchValue</span><span class="p">(</span><span class="nx">valueToSearch</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="s2">"WHEN 3 rows loaded THEN Search with partial Name SHOULD filter to show one row"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">scenario</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">SearchCustomerNameScenarioBuilderModule</span><span class="p">.</span><span class="k">new</span><span class="p">();</span>

        <span class="c1">//arrange</span>
        <span class="kd">const</span> <span class="nx">valueToSearch</span> <span class="o">=</span> <span class="s1">'test'</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">expectedNumberOfVisibleRows</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">expectedNumberOfInvisibleRows</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

        <span class="nx">scenario</span><span class="p">.</span><span class="nx">arrange_Page_With_3_Initial_DataRows</span><span class="p">();</span>

        <span class="c1">//act</span>
        <span class="nx">scenario</span><span class="p">.</span><span class="nx">act_SearchName</span><span class="p">(</span><span class="nx">valueToSearch</span><span class="p">);</span>

        <span class="c1">//assert</span>
        <span class="nx">scenario</span><span class="p">.</span><span class="nx">assert_Number_Of_Visible_Rows</span><span class="p">(</span><span class="nx">expectedNumberOfVisibleRows</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">assert_Number_Of_Invisible_Rows</span><span class="p">(</span><span class="nx">expectedNumberOfInvisibleRows</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">assert_Visible_Rows_Name_Contains_SearchValue</span><span class="p">(</span><span class="nx">valueToSearch</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">assert_Invisible_Rows_Name_Do_Not_Contain_SearchValue</span><span class="p">(</span><span class="nx">valueToSearch</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="s2">"WHEN 3 rows loaded THEN Search with empty Name SHOULD filter to show all rows"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">scenario</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">SearchCustomerNameScenarioBuilderModule</span><span class="p">.</span><span class="k">new</span><span class="p">();</span>

        <span class="c1">//arrange</span>
        <span class="kd">const</span> <span class="nx">valueToSearch</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">expectedNumberOfVisibleRows</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">expectedNumberOfInvisibleRows</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="nx">scenario</span><span class="p">.</span><span class="nx">arrange_Page_With_3_Initial_DataRows</span><span class="p">();</span>

        <span class="c1">//act</span>
        <span class="nx">scenario</span><span class="p">.</span><span class="nx">act_SearchName</span><span class="p">(</span><span class="nx">valueToSearch</span><span class="p">);</span>

        <span class="c1">//assert</span>
        <span class="nx">scenario</span><span class="p">.</span><span class="nx">assert_Number_Of_Visible_Rows</span><span class="p">(</span><span class="nx">expectedNumberOfVisibleRows</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">assert_Number_Of_Invisible_Rows</span><span class="p">(</span><span class="nx">expectedNumberOfInvisibleRows</span><span class="p">);</span>
    <span class="p">});</span>


    <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">jest</span><span class="p">,</span> <span class="nx">expect</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">currentModule</span> <span class="o">=</span> <span class="p">{};</span>

        <span class="nx">currentModule</span><span class="p">.</span><span class="k">new</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">testProjectRoot</span> <span class="o">=</span> <span class="s1">'../../../'</span><span class="p">;</span>
            <span class="nx">jest</span><span class="p">.</span><span class="nx">resetModules</span><span class="p">();</span>

            <span class="nx">require</span><span class="p">(</span><span class="nx">testProjectRoot</span> <span class="o">+</span> <span class="s1">'TestUtilities.js'</span><span class="p">);</span>
            <span class="nb">global</span><span class="p">.</span><span class="nx">TestUtilitiesModule</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
            <span class="nx">require</span><span class="p">(</span><span class="nx">testProjectRoot</span> <span class="o">+</span> <span class="s1">'Builders/CustomerOverviewHtmlBuilder.js'</span><span class="p">);</span>

            <span class="kd">let</span> <span class="nx">wwwRoot</span> <span class="o">=</span> <span class="nx">testProjectRoot</span> <span class="o">+</span> <span class="nb">global</span><span class="p">.</span><span class="nx">TestUtilitiesModule</span><span class="p">.</span><span class="nx">wwwRoot</span><span class="p">;</span>
            <span class="nx">require</span><span class="p">(</span><span class="nx">wwwRoot</span> <span class="o">+</span> <span class="s1">'js/utilities.js'</span><span class="p">);</span>
            <span class="nx">require</span><span class="p">(</span><span class="nx">wwwRoot</span> <span class="o">+</span> <span class="s1">'js/customer-overview.js'</span><span class="p">);</span>

            <span class="k">return</span> <span class="nx">currentModule</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">currentModule</span><span class="p">.</span><span class="nx">arrange_Page_With_3_Initial_DataRows</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

            <span class="kd">const</span> <span class="nx">template</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">customerOverviewHtmlBuilderModule</span>
                <span class="p">.</span><span class="k">new</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">clearDataRows</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">hideLoadingRow</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">withDataRow</span><span class="p">(</span><span class="s1">'first customer'</span><span class="p">,</span> <span class="s1">'first customer email'</span><span class="p">,</span> <span class="s1">'first customer country'</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">withDataRow</span><span class="p">(</span><span class="s1">'second customer'</span><span class="p">,</span> <span class="s1">'second customer email'</span><span class="p">,</span> <span class="s1">'second customer country'</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">withDataRow</span><span class="p">(</span><span class="s1">'testcustomer'</span><span class="p">,</span> <span class="s1">'testcustomer email'</span><span class="p">,</span> <span class="s1">'testcustomer country'</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">build</span><span class="p">();</span>

            <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">template</span><span class="p">);</span>

            <span class="k">return</span> <span class="nx">currentModule</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">currentModule</span><span class="p">.</span><span class="nx">act_SearchName</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">nameToSearch</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">(</span><span class="s2">"#searchCustomerName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">nameToSearch</span><span class="p">);</span>
            <span class="nb">window</span><span class="p">.</span><span class="nx">customerOverviewModule</span><span class="p">.</span><span class="nx">filterData</span><span class="p">();</span>

            <span class="k">return</span> <span class="nx">currentModule</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">currentModule</span><span class="p">.</span><span class="nx">assert_Number_Of_Visible_Rows</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">numberOfRows</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">getVisibleRows</span><span class="p">()).</span><span class="nx">toHaveLength</span><span class="p">(</span><span class="nx">numberOfRows</span><span class="p">);</span>

            <span class="k">return</span> <span class="nx">currentModule</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">currentModule</span><span class="p">.</span><span class="nx">assert_Number_Of_Invisible_Rows</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">numberOfRows</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">getInvisibleRows</span><span class="p">()).</span><span class="nx">toHaveLength</span><span class="p">(</span><span class="nx">numberOfRows</span><span class="p">);</span>

            <span class="k">return</span> <span class="nx">currentModule</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">currentModule</span><span class="p">.</span><span class="nx">assert_Visible_Rows_Name_Is_Complete_SearchValue</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">nameToSearch</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">rows</span> <span class="o">=</span> <span class="nx">getVisibleRows</span><span class="p">();</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">rows</span><span class="p">,</span>
                <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isLoadingRow</span><span class="p">(</span><span class="nx">row</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">expect</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">row</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'td'</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">nameToSearch</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">});</span>

            <span class="k">return</span> <span class="nx">currentModule</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">currentModule</span><span class="p">.</span><span class="nx">assert_Visible_Rows_Name_Contains_SearchValue</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">nameToSearch</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">rows</span> <span class="o">=</span> <span class="nx">getVisibleRows</span><span class="p">();</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">rows</span><span class="p">,</span>
                <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isLoadingRow</span><span class="p">(</span><span class="nx">row</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">expect</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">row</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'td'</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">expect</span><span class="p">.</span><span class="nx">stringContaining</span><span class="p">(</span><span class="nx">nameToSearch</span><span class="p">));</span>
                    <span class="p">}</span>
                <span class="p">});</span>

            <span class="k">return</span> <span class="nx">currentModule</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">currentModule</span><span class="p">.</span><span class="nx">assert_Invisible_Rows_Name_Do_Not_Contain_SearchValue</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">nameToSearch</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">rows</span> <span class="o">=</span> <span class="nx">getInvisibleRows</span><span class="p">();</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">rows</span><span class="p">,</span>
                <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isLoadingRow</span><span class="p">(</span><span class="nx">row</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">expect</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">row</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'td'</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">expect</span><span class="p">.</span><span class="nx">not</span><span class="p">.</span><span class="nx">stringContaining</span><span class="p">(</span><span class="nx">nameToSearch</span><span class="p">));</span>
                    <span class="p">}</span>
                <span class="p">});</span>

            <span class="k">return</span> <span class="nx">currentModule</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="kd">function</span> <span class="nx">isLoadingRow</span><span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="nx">row</span><span class="p">).</span><span class="nx">hasClass</span><span class="p">(</span><span class="s1">'loading-row'</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kd">function</span> <span class="nx">getVisibleRows</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">getAllRows</span><span class="p">(),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="nx">$</span><span class="p">(</span><span class="nx">row</span><span class="p">).</span><span class="nx">hasClass</span><span class="p">(</span><span class="s1">'display-none'</span><span class="p">);</span> <span class="p">});</span>
        <span class="p">}</span>

        <span class="kd">function</span> <span class="nx">getInvisibleRows</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">getAllRows</span><span class="p">(),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="nx">row</span><span class="p">).</span><span class="nx">hasClass</span><span class="p">(</span><span class="s1">'display-none'</span><span class="p">);</span> <span class="p">});</span>
        <span class="p">}</span>

        <span class="kd">function</span> <span class="nx">getAllRows</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#customer-table-body'</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'tr'</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nb">global</span><span class="p">.</span><span class="nx">SearchCustomerNameScenarioBuilderModule</span> <span class="o">=</span> <span class="nx">currentModule</span><span class="p">;</span>

    <span class="p">})(</span><span class="nx">jest</span><span class="p">,</span> <span class="nx">expect</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div></div>

<h3 id="resources">Resources</h3>
<ul>
  <li><a href="https://docs.microsoft.com/en-us/visualstudio/javascript/unit-testing-javascript-with-visual-studio?view=vs-2019#unit-tests-in-other-project-types">Microsoft Docs page on Unit testing JavaScript and TypeScript in Visual Studio</a></li>
  <li><a href="https://jestjs.io/docs/en/expect">Jest expect method documentation</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Builder%20pattern">Wikipedia page for the builder pattern</a></li>
</ul>

        </div>
    </article>
    
    <center><p><a href="/archive">For additional posts see the archive page for an overview of all available posts</a></p></center>
    
</div>

                </main>
            </div>
            <div class="col-md-3">
                <aside aria-label="sidebar">
                    <section class="sidebar-section">
    <h3>About me</h3>
    I am a dutch .NET developer.
    I have been coding professionally since 2008.
    On this blog, I will be writing about multiple subjects that I use in my daily programming job or subjects that I am studying.
</section>
<section class="sidebar-section">
    <h3>Social</h3>
    <a href="https://github.com/SamanthaNeilen"><i class="fa fa-github" aria-hidden="true"></i><span>&nbsp;SamanthaNeilen</span></a> <br />
    <a href="https://twitter.com/NeilenSamantha"><i class="fa fa-twitter" aria-hidden="true"></i><span>&nbsp;NeilenSamantha</span></a> <br />
    <a href="https://www.linkedin.com/in/samantha-neilen-16153713"><i class="fa fa-linkedin" aria-hidden="true"></i><span>&nbsp;Samantha Neilen</span></a><br />
    Subscribe via <a href="/feed.xml">RSS</a>
</section>
<section class="sidebar-section">
    <h3>Last posts </h3>
    
    <a href="/2021/01/31/Using-SoapUI-for-API-tests.html">Using SoapUI for API tests</a> <br />
    <div class="last-posts-spacer"></div>
    
    <a href="/2020/06/29/Using-Postman-for-quick-and-repeatable-API-tests.html">Using Postman for quick and repeatable API tests</a> <br />
    <div class="last-posts-spacer"></div>
    
    <a href="/2020/05/04/Calling-async-methods-with-configureawait.html">Calling async methods with ConfigureAwait</a> <br />
    <div class="last-posts-spacer"></div>
    
    <a href="/2020/03/18/Tips-for-building-habits-around-working-from-home.html">Tips for building habits around working from home</a> <br />
    <div class="last-posts-spacer"></div>
    
    <a href="/2020/02/08/Unit-testing-self-executing-JavaScript-Modules-in-Visual-Studio.html">Unit testing self-executing JavaScript modules in Visual Studio</a> <br />
    <div class="last-posts-spacer"></div>
    
    <a href="/archive">Archive</a>
</section>
                </aside>
            </div>
        </div>
    </div>
</body>
</html>
